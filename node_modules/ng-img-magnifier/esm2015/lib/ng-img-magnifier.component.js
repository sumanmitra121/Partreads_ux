import { Component, Input, ViewChild } from '@angular/core';
export class NgImgMagnifierComponent {
    constructor() {
        this.thumbImage = '';
        this.fullImage = '';
        this.top = '2';
        this.right = '1';
        this.lensWidth = '150';
        this.lensHeight = '150';
        this.resultWidth = '35';
        this.resultHeight = '60';
        this.imgWidth = '300';
        this.imgHeight = '300';
    }
    ngOnInit() {
    }
    imageZoom() {
        this.showLensDiv();
        var img, lens, result, cx, cy;
        result = this.resultID.nativeElement;
        result.style.top = this.top + '%';
        result.style.right = this.right + '%';
        result.style.width = this.resultWidth + '%';
        result.style.height = this.resultHeight + '%';
        this.showZoom = true;
        img = this.imgID.nativeElement;
        lens = this.zoomDiv.nativeElement;
        if (img.width > (img.height * 2)) {
            lens.style.width = (img.width / 3) + "px";
            lens.style.height = (img.height / 1) + "px";
        }
        else if (img.height > (img.width * 2)) {
            lens.style.width = (img.width / 1) + "px";
            lens.style.height = (img.height / 3) + "px";
        }
        else {
            lens.style.width = this.lensWidth + "px";
            lens.style.height = this.lensHeight + "px";
        }
        lens.style.opacity = 1;
        cx = result.offsetWidth / lens.offsetWidth;
        cy = result.offsetHeight / lens.offsetHeight;
        result.style.backgroundImage = "url('" + this.fullImage + "')";
        result.style.backgroundSize = (img.width * cx) + "px " + (img.height * cy) + "px";
        lens.addEventListener("mousemove", moveLens);
        img.addEventListener("mousemove", moveLens);
        lens.addEventListener("touchmove", moveLens);
        img.addEventListener("touchmove", moveLens);
        function moveLens(e) {
            var pos, x, y;
            e.preventDefault();
            pos = getPointerPosition(e);
            x = pos.x - (lens.offsetWidth / 2);
            y = pos.y - (lens.offsetHeight / 2);
            if (x > img.width - lens.offsetWidth) {
                x = img.width - lens.offsetWidth;
            }
            if (x < 0) {
                x = 0;
            }
            if (y > img.height - lens.offsetHeight) {
                y = img.height - lens.offsetHeight;
            }
            if (y < 0) {
                y = 0;
            }
            lens.style.left = (x + 5) + "px";
            lens.style.top = (y + 5) + "px";
            result.style.backgroundPosition = "-" + (x * cx) + "px -" + (y * cy) + "px";
        }
        function getPointerPosition(e) {
            var a, x = 0, y = 0;
            e = e || window.event;
            a = img.getBoundingClientRect();
            x = e.pageX - a.left;
            y = e.pageY - a.top;
            x = x - window.pageXOffset;
            y = y - window.pageYOffset;
            return { x: x, y: y };
        }
    }
    showZoomWin() {
        this.showZoom = true;
    }
    hideZoomWin() {
        this.showZoom = false;
        this.zoomDiv.nativeElement.style.opacity = 0;
        this.zoomDiv.nativeElement.style.display = 'none';
    }
    showLensDiv() {
        this.zoomDiv.nativeElement.style.display = 'block';
    }
}
NgImgMagnifierComponent.decorators = [
    { type: Component, args: [{
                selector: 'ng-img-magnifier',
                template: `
    <div class="img-zoom-container ">
      <div class="outerImg " (mouseenter)="showZoomWin() " (mouseleave)="hideZoomWin() ">
          <img #myimage id="myimage" class="mainImg" src={{thumbImage}} width={{imgWidth}} style="vertical-align: middle !important;" height={{imgHeight}} (mousemove)="imageZoom();">
          <div #zoomDiv id="zoomDiv " class="img-zoom-lens "></div>
      </div>
    </div>
    <div *ngIf="showZoom ">
        <div #myresult id="myresult " class="img-zoom-result "></div>
    </div>`,
                styles: [`html,
    body {
        height: 100%;
    }`,
                    `body {
        margin: 0;
    }`,
                    `* {
        box-sizing: border-box;
    }`,
                    `.img-zoom-container {
        position: relative;
    }`,
                    `.img-zoom-lens {
        position: absolute;
        border: 1px solid #d4d4d4;
        // background-image: url('./assets/zoom-image.png');
        background-color: rgb(255, 255, 255, 0.2);
        background-repeat: repeat;
        background-size: contain;
        opacity: 0;
        cursor: zoom-in !important;
        display: none;
    }`,
                    `.img-zoom-result {
        background-color: none;
        background-repeat: no-repeat;
        transition: 0.3s;
        border-radius: 5px;
        position: absolute;
    }`,
                    `@media screen and (max-width: 800px) {
        .img-zoom-result {
            display: none;
        }
    }`,
                    `.show {
        opacity: 500;
    }`,
                    `.hide {
        opacity: 0;
    }`,
                    `.mainImg {
        vertical-align: middle !important;
    }`,
                    `.outerImg {
        width: 310px;
        height: auto;
        padding-left: 5px;
        padding-right: 5px;
        padding-top: 5px;
        padding-bottom: 5px;
    }`]
            },] }
];
NgImgMagnifierComponent.ctorParameters = () => [];
NgImgMagnifierComponent.propDecorators = {
    thumbImage: [{ type: Input }],
    fullImage: [{ type: Input }],
    top: [{ type: Input }],
    right: [{ type: Input }],
    lensWidth: [{ type: Input }],
    lensHeight: [{ type: Input }],
    resultWidth: [{ type: Input }],
    resultHeight: [{ type: Input }],
    imgWidth: [{ type: Input }],
    imgHeight: [{ type: Input }],
    resultID: [{ type: ViewChild, args: ['myresult',] }],
    imgID: [{ type: ViewChild, args: ['myimage',] }],
    zoomDiv: [{ type: ViewChild, args: ['zoomDiv',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctaW1nLW1hZ25pZmllci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZy1pbWctbWFnbmlmaWVyL3NyYy9saWIvbmctaW1nLW1hZ25pZmllci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBYyxLQUFLLEVBQVUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBZ0ZoRixNQUFNLE9BQU8sdUJBQXVCO0lBZ0JsQztRQVhTLGVBQVUsR0FBRyxFQUFFLENBQUM7UUFDaEIsY0FBUyxHQUFHLEVBQUUsQ0FBQztRQUNmLFFBQUcsR0FBRyxHQUFHLENBQUM7UUFDVixVQUFLLEdBQUcsR0FBRyxDQUFDO1FBQ1osY0FBUyxHQUFHLEtBQUssQ0FBQztRQUNsQixlQUFVLEdBQUcsS0FBSyxDQUFDO1FBQ25CLGdCQUFXLEdBQUcsSUFBSSxDQUFDO1FBQ25CLGlCQUFZLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFDakIsY0FBUyxHQUFHLEtBQUssQ0FBQztJQUVaLENBQUM7SUFkaEIsUUFBUTtJQUNSLENBQUM7SUFvQkQsU0FBUztRQUNQLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNuQixJQUFJLEdBQUcsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUM7UUFFOUIsTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDO1FBRXJDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2xDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO1FBQ3RDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLEdBQUcsR0FB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Q29tcG9uZW50LCBFbGVtZW50UmVmLCBJbnB1dCwgT25Jbml0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbmctaW1nLW1hZ25pZmllcicsXG4gIHRlbXBsYXRlOiBgXG4gICAgPGRpdiBjbGFzcz1cImltZy16b29tLWNvbnRhaW5lciBcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJvdXRlckltZyBcIiAobW91c2VlbnRlcik9XCJzaG93Wm9vbVdpbigpIFwiIChtb3VzZWxlYXZlKT1cImhpZGVab29tV2luKCkgXCI+XG4gICAgICAgICAgPGltZyAjbXlpbWFnZSBpZD1cIm15aW1hZ2VcIiBjbGFzcz1cIm1haW5JbWdcIiBzcmM9e3t0aHVtYkltYWdlfX0gd2lkdGg9e3tpbWdXaWR0aH19IHN0eWxlPVwidmVydGljYWwtYWxpZ246IG1pZGRsZSAhaW1wb3J0YW50O1wiIGhlaWdodD17e2ltZ0hlaWdodH19IChtb3VzZW1vdmUpPVwiaW1hZ2Vab29tKCk7XCI+XG4gICAgICAgICAgPGRpdiAjem9vbURpdiBpZD1cInpvb21EaXYgXCIgY2xhc3M9XCJpbWctem9vbS1sZW5zIFwiPjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiAqbmdJZj1cInNob3dab29tIFwiPlxuICAgICAgICA8ZGl2ICNteXJlc3VsdCBpZD1cIm15cmVzdWx0IFwiIGNsYXNzPVwiaW1nLXpvb20tcmVzdWx0IFwiPjwvZGl2PlxuICAgIDwvZGl2PmAsXG4gIHN0eWxlczogW1xuICAgIGBodG1sLFxuICAgIGJvZHkge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgfWAsXG5cbiAgICBgYm9keSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICB9YCxcblxuICAgIGAqIHtcbiAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICB9YCxcblxuICAgIGAuaW1nLXpvb20tY29udGFpbmVyIHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1gLFxuXG4gICAgYC5pbWctem9vbS1sZW5zIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZDRkNGQ0O1xuICAgICAgICAvLyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy4vYXNzZXRzL3pvb20taW1hZ2UucG5nJyk7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigyNTUsIDI1NSwgMjU1LCAwLjIpO1xuICAgICAgICBiYWNrZ3JvdW5kLXJlcGVhdDogcmVwZWF0O1xuICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IGNvbnRhaW47XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgIGN1cnNvcjogem9vbS1pbiAhaW1wb3J0YW50O1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1gLFxuXG4gICAgYC5pbWctem9vbS1yZXN1bHQge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBub25lO1xuICAgICAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICAgICAgICB0cmFuc2l0aW9uOiAwLjNzO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB9YCxcblxuICAgIGBAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA4MDBweCkge1xuICAgICAgICAuaW1nLXpvb20tcmVzdWx0IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIH1cbiAgICB9YCxcblxuICAgIGAuc2hvdyB7XG4gICAgICAgIG9wYWNpdHk6IDUwMDtcbiAgICB9YCxcblxuICAgIGAuaGlkZSB7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgfWAsXG5cbiAgICBgLm1haW5JbWcge1xuICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlICFpbXBvcnRhbnQ7XG4gICAgfWAsXG5cbiAgICBgLm91dGVySW1nIHtcbiAgICAgICAgd2lkdGg6IDMxMHB4O1xuICAgICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICAgIHBhZGRpbmctbGVmdDogNXB4O1xuICAgICAgICBwYWRkaW5nLXJpZ2h0OiA1cHg7XG4gICAgICAgIHBhZGRpbmctdG9wOiA1cHg7XG4gICAgICAgIHBhZGRpbmctYm90dG9tOiA1cHg7XG4gICAgfWAsXG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgTmdJbWdNYWduaWZpZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICB9XG5cbiAgQElucHV0KCkgdGh1bWJJbWFnZSA9ICcnO1xuICBASW5wdXQoKSBmdWxsSW1hZ2UgPSAnJztcbiAgQElucHV0KCkgdG9wID0gJzInO1xuICBASW5wdXQoKSByaWdodCA9ICcxJztcbiAgQElucHV0KCkgbGVuc1dpZHRoID0gJzE1MCc7XG4gIEBJbnB1dCgpIGxlbnNIZWlnaHQgPSAnMTUwJztcbiAgQElucHV0KCkgcmVzdWx0V2lkdGggPSAnMzUnO1xuICBASW5wdXQoKSByZXN1bHRIZWlnaHQgPSAnNjAnO1xuICBASW5wdXQoKSBpbWdXaWR0aCA9ICczMDAnO1xuICBASW5wdXQoKSBpbWdIZWlnaHQgPSAnMzAwJztcblxuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgQFZpZXdDaGlsZCgnbXlyZXN1bHQnKSByZXN1bHRJRDogRWxlbWVudFJlZlxuICBAVmlld0NoaWxkKCdteWltYWdlJykgaW1nSUQ6IEVsZW1lbnRSZWZcbiAgQFZpZXdDaGlsZCgnem9vbURpdicpIHpvb21EaXY6IEVsZW1lbnRSZWZcbiAgc2hvd1pvb206Ym9vbGVhbjtcblxuICBpbWFnZVpvb20oKSB7XG4gICAgdGhpcy5zaG93TGVuc0RpdigpO1xuICAgIHZhciBpbWcsIGxlbnMsIHJlc3VsdCwgY3gsIGN5O1xuXG4gICAgcmVzdWx0ID0gdGhpcy5yZXN1bHRJRC5uYXRpdmVFbGVtZW50O1xuXG4gICAgcmVzdWx0LnN0eWxlLnRvcCA9IHRoaXMudG9wICsgJyUnO1xuICAgIHJlc3VsdC5zdHlsZS5yaWdodCA9IHRoaXMucmlnaHQgKyAnJSc7XG4gICAgcmVzdWx0LnN0eWxlLndpZHRoID0gdGhpcy5yZXN1bHRXaWR0aCArICclJztcbiAgICByZXN1bHQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5yZXN1bHRIZWlnaHQgKyAnJSc7XG5cbiAgICB0aGlzLnNob3dab29tID0gdHJ1ZTtcbiAgICBcbiAgICBpbWcgPSB0aGlzLmltZ0lELm5hdGl2ZUVsZW1lbnQ7XG4gICAgbGVucyA9IHRoaXMuem9vbURpdi5uYXRpdmVFbGVtZW50O1xuICAgIFxuICAgIGlmKGltZy53aWR0aCA+IChpbWcuaGVpZ2h0KjIpKXtcbiAgICAgIGxlbnMuc3R5bGUud2lkdGggPSAoaW1nLndpZHRoIC8gMykgKyBcInB4XCI7XG4gICAgICBsZW5zLnN0eWxlLmhlaWdodCA9IChpbWcuaGVpZ2h0IC8gMSkgKyBcInB4XCI7XG4gICAgfVxuICAgIGVsc2UgaWYoaW1nLmhlaWdodCA+IChpbWcud2lkdGgqMikpe1xuICAgICAgbGVucy5zdHlsZS53aWR0aCA9IChpbWcud2lkdGggLyAxKSArIFwicHhcIjtcbiAgICAgIGxlbnMuc3R5bGUuaGVpZ2h0ID0gKGltZy5oZWlnaHQgLyAzKSArIFwicHhcIjtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGxlbnMuc3R5bGUud2lkdGggPSB0aGlzLmxlbnNXaWR0aCArIFwicHhcIjtcbiAgICAgIGxlbnMuc3R5bGUuaGVpZ2h0ID0gdGhpcy5sZW5zSGVpZ2h0ICsgXCJweFwiO1xuICAgIH1cblxuICAgIGxlbnMuc3R5bGUub3BhY2l0eSA9IDE7XG5cbiAgICBjeCA9IHJlc3VsdC5vZmZzZXRXaWR0aCAvIGxlbnMub2Zmc2V0V2lkdGg7XG4gICAgY3kgPSByZXN1bHQub2Zmc2V0SGVpZ2h0IC8gbGVucy5vZmZzZXRIZWlnaHQ7XG5cbiAgICByZXN1bHQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoJ1wiICsgdGhpcy5mdWxsSW1hZ2UgKyBcIicpXCI7XG4gICAgcmVzdWx0LnN0eWxlLmJhY2tncm91bmRTaXplID0gKGltZy53aWR0aCAqIGN4KSArIFwicHggXCIgKyAoaW1nLmhlaWdodCAqIGN5KSArIFwicHhcIjtcblxuICAgIGxlbnMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBtb3ZlTGVucyk7XG4gICAgaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbW92ZUxlbnMpO1xuICAgIGxlbnMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCBtb3ZlTGVucyk7XG4gICAgaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgbW92ZUxlbnMpO1xuXG4gICAgZnVuY3Rpb24gbW92ZUxlbnMoZSkge1xuICAgICAgdmFyIHBvcywgeCwgeTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHBvcyA9IGdldFBvaW50ZXJQb3NpdGlvbihlKTtcblxuICAgICAgeCA9IHBvcy54IC0gKGxlbnMub2Zmc2V0V2lkdGggLyAyKTtcbiAgICAgIHkgPSBwb3MueSAtIChsZW5zLm9mZnNldEhlaWdodCAvIDIpO1xuXG4gICAgICBpZiAoeCA+IGltZy53aWR0aCAtIGxlbnMub2Zmc2V0V2lkdGgpIHsgeCA9IGltZy53aWR0aCAtIGxlbnMub2Zmc2V0V2lkdGg7IH1cbiAgICAgIGlmICh4IDwgMCkgeyB4ID0gMDsgfVxuICAgICAgaWYgKHkgPiBpbWcuaGVpZ2h0IC0gbGVucy5vZmZzZXRIZWlnaHQpIHsgeSA9IGltZy5oZWlnaHQgLSBsZW5zLm9mZnNldEhlaWdodDsgfVxuICAgICAgaWYgKHkgPCAwKSB7IHkgPSAwOyB9XG5cbiAgICAgIGxlbnMuc3R5bGUubGVmdCA9ICh4ICsgNSkgKyBcInB4XCI7XG4gICAgICBsZW5zLnN0eWxlLnRvcCA9ICh5ICsgNSkgKyBcInB4XCI7XG5cbiAgICAgIHJlc3VsdC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBcIi1cIiArICh4ICogY3gpICsgXCJweCAtXCIgKyAoeSAqIGN5KSArIFwicHhcIjtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0UG9pbnRlclBvc2l0aW9uKGUpIHtcbiAgICAgIHZhciBhLCB4ID0gMCwgeSA9IDA7XG4gICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG5cbiAgICAgIGEgPSBpbWcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgIHggPSBlLnBhZ2VYIC0gYS5sZWZ0O1xuICAgICAgeSA9IGUucGFnZVkgLSBhLnRvcDtcblxuICAgICAgeCA9IHggLSB3aW5kb3cucGFnZVhPZmZzZXQ7XG4gICAgICB5ID0geSAtIHdpbmRvdy5wYWdlWU9mZnNldDtcblxuICAgICAgcmV0dXJuIHsgeDogeCwgeTogeSB9O1xuICAgIH1cbiAgfVxuICAgIFxuICBzaG93Wm9vbVdpbigpe1xuICAgIHRoaXMuc2hvd1pvb20gPSB0cnVlO1xuICB9XG4gIGhpZGVab29tV2luKCl7XG4gICAgdGhpcy5zaG93Wm9vbSA9IGZhbHNlO1xuICAgIHRoaXMuem9vbURpdi5uYXRpdmVFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAwO1xuICAgIHRoaXMuem9vbURpdi5uYXRpdmVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH1cbiAgc2hvd0xlbnNEaXYoKVxuICB7XG4gICAgdGhpcy56b29tRGl2Lm5hdGl2ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIH1cbn1cbiJdfQ==