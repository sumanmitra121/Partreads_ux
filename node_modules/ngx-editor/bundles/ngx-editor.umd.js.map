{"version":3,"file":"ngx-editor.umd.js","sources":["../../../projects/ngx-editor/src/lib/plugins/editable.ts","../../../projects/ngx-editor/src/lib/plugins/placeholder.ts","../../../projects/ngx-editor/src/lib/plugins/attributes.ts","../../../projects/ngx-editor/src/lib/plugins/focus.ts","../../../projects/ngx-editor/src/lib/plugins/blur.ts","../../../projects/ngx-editor/src/lib/components/image-view/image-view.component.ts","../../../projects/ngx-editor/src/lib/plugins/image.ts","../../../projects/ngx-editor/src/lib/plugins/link.ts","../../../projects/ngx-editor/src/lib/parsers.ts","../../../projects/ngx-editor/src/lib/editor.component.ts","../../../projects/ngx-editor/src/lib/modules/menu/menu.service.ts","../../../projects/ngx-editor/src/lib/modules/menu/menu.component.ts","../../../projects/ngx-editor/src/lib/icons/bold.ts","../../../projects/ngx-editor/src/lib/icons/italic.ts","../../../projects/ngx-editor/src/lib/icons/code.ts","../../../projects/ngx-editor/src/lib/icons/underline.ts","../../../projects/ngx-editor/src/lib/icons/strike.ts","../../../projects/ngx-editor/src/lib/icons/ordered_list.ts","../../../projects/ngx-editor/src/lib/icons/bullet_list.ts","../../../projects/ngx-editor/src/lib/icons/quote.ts","../../../projects/ngx-editor/src/lib/icons/link.ts","../../../projects/ngx-editor/src/lib/icons/unlink.ts","../../../projects/ngx-editor/src/lib/icons/image.ts","../../../projects/ngx-editor/src/lib/icons/align_left.ts","../../../projects/ngx-editor/src/lib/icons/align_center.ts","../../../projects/ngx-editor/src/lib/icons/align_right.ts","../../../projects/ngx-editor/src/lib/icons/align_justify.ts","../../../projects/ngx-editor/src/lib/icons/text_color.ts","../../../projects/ngx-editor/src/lib/icons/color_fill.ts","../../../projects/ngx-editor/src/lib/icons/index.ts","../../../projects/ngx-editor/src/lib/pipes/sanitize/sanitize-html.pipe.ts","../../../projects/ngx-editor/src/lib/modules/menu/floating-menu/floating-menu.component.ts","../../../projects/ngx-editor/src/lib/Locals.ts","../../../projects/ngx-editor/src/lib/editor.service.ts","../../../projects/ngx-editor/src/lib/commands/Mark.ts","../../../projects/ngx-editor/src/lib/commands/Blockquote.ts","../../../projects/ngx-editor/src/lib/commands/ListItem.ts","../../../projects/ngx-editor/src/lib/commands/Heading.ts","../../../projects/ngx-editor/src/lib/commands/TextAlign.ts","../../../projects/ngx-editor/src/lib/commands/Link.ts","../../../projects/ngx-editor/src/lib/commands/Image.ts","../../../projects/ngx-editor/src/lib/commands/TextColor.ts","../../../projects/ngx-editor/src/lib/commands/index.ts","../../../projects/ngx-editor/src/lib/modules/menu/MenuCommands.ts","../../../projects/ngx-editor/src/lib/modules/menu/toggle-command/toggle-command.component.ts","../../../projects/ngx-editor/src/lib/modules/menu/link/link.component.ts","../../../projects/ngx-editor/src/lib/modules/menu/dropdown/dropdown.component.ts","../../../projects/ngx-editor/src/lib/modules/menu/image/image.component.ts","../../../projects/ngx-editor/src/lib/modules/menu/color-picker/color-picker.component.ts","../../../projects/ngx-editor/src/lib/modules/menu/bubble/bubble.component.ts","../../../projects/ngx-editor/src/lib/modules/menu/menu.module.ts","../../../projects/ngx-editor/src/lib/editor.module.ts","../../../projects/ngx-editor/src/lib/validators.ts","../../../node_modules/tslib/tslib.es6.js","../../../projects/ngx-editor/src/lib/EditorCommands.ts","../../../projects/ngx-editor/src/lib/defaultPlugins.ts","../../../projects/ngx-editor/src/lib/Editor.ts","../../../projects/ngx-editor/src/ngx-editor.ts"],"sourcesContent":["import { EditorState, Plugin, PluginKey, Transaction } from 'prosemirror-state';\n\nconst editablePlugin = (editable = true): Plugin => {\n  return new Plugin({\n    key: new PluginKey('editable'),\n    state: {\n      init(): boolean {\n        return editable;\n      },\n      apply(tr: Transaction, previousVal: boolean): string {\n        return tr.getMeta('UPDATE_EDITABLE') ?? previousVal;\n      }\n    },\n    props: {\n      editable(state: EditorState): boolean {\n        return this.getState(state);\n      },\n      attributes(state: EditorState): Record<string, string> | null {\n        const isEnabled = this.getState(state);\n\n        if (isEnabled) {\n          return null;\n        }\n\n        return {\n          class: 'NgxEditor__Content--Disabled'\n        };\n      }\n    }\n  });\n};\n\nexport default editablePlugin;\n","import { Plugin, EditorState, PluginKey, Transaction } from 'prosemirror-state';\nimport { DecorationSet, Decoration } from 'prosemirror-view';\nimport { Node as ProseMirrorNode } from 'prosemirror-model';\n\nconst PLACEHOLDER_CLASSNAME = 'NgxEditor__Placeholder';\n\nconst placeholderPlugin = (text?: string): Plugin => {\n  return new Plugin({\n    key: new PluginKey('placeholder'),\n    state: {\n      init(): string {\n        return text ?? '';\n      },\n      apply(tr: Transaction, previousVal: string): string {\n        const placeholder = tr.getMeta('UPDATE_PLACEHOLDER') ?? previousVal;\n        return placeholder;\n      }\n    },\n    props: {\n      decorations(state: EditorState): DecorationSet {\n        const { doc } = state;\n        const { textContent, childCount } = doc;\n\n        const placeholder = this.getState(state);\n\n        if (!placeholder || childCount > 1) {\n          return DecorationSet.empty;\n        }\n\n        const decorations: Decoration[] = [];\n\n        const decorate = (node: ProseMirrorNode, pos: number) => {\n          if (node.type.isBlock && node.childCount === 0 && textContent.length === 0) {\n            const placeholderNode = Decoration.node(pos, (pos + node.nodeSize), {\n              class: PLACEHOLDER_CLASSNAME,\n              'data-placeholder': placeholder,\n              'data-align': node.attrs.align ?? null\n            });\n\n            decorations.push(placeholderNode);\n          }\n\n          return false;\n        };\n\n        doc.descendants(decorate);\n        return DecorationSet.create(doc, decorations);\n      }\n    }\n  });\n};\n\nexport default placeholderPlugin;\n","import { Plugin, PluginKey } from 'prosemirror-state';\n\nconst attributesPlugin = (attributes = {}): Plugin => {\n  return new Plugin({\n    key: new PluginKey('attributes'),\n    props: {\n      attributes\n    }\n  });\n};\n\nexport default attributesPlugin;\n","import { Plugin, PluginKey } from 'prosemirror-state';\n\nconst focusPlugin = (cb: () => void): Plugin => {\n  return new Plugin({\n    key: new PluginKey('focus'),\n    props: {\n      handleDOMEvents: {\n        focus: () => {\n          cb();\n          return false;\n        }\n      }\n    }\n  });\n};\n\nexport default focusPlugin;\n","import { Plugin, PluginKey } from 'prosemirror-state';\n\nconst blurPlugin = (cb: () => void):Plugin => {\n  return new Plugin({\n    key: new PluginKey('blur'),\n    props: {\n      handleDOMEvents: {\n        blur: () => {\n          cb();\n          return false;\n        }\n      }\n    }\n  });\n};\n\nexport default blurPlugin;\n","import {\n  Component, ElementRef, EventEmitter,\n  Input, Output, ViewChild\n} from '@angular/core';\nimport { EditorView } from 'prosemirror-view';\n\n@Component({\n  selector: 'ngx-image-view',\n  templateUrl: './image-view.component.html',\n  styleUrls: ['./image-view.component.scss']\n})\n\nexport class ImageViewComponent {\n  @Input() src: string;\n  @Input() alt = '';\n  @Input() title = '';\n  @Input() outerWidth = '';\n  @Input() selected = false;\n  @Input() view: EditorView;\n\n  @Output() imageResize = new EventEmitter();\n\n  @ViewChild('imgEl', { static: true }) imgEl: ElementRef;\n\n  startResizing(e: MouseEvent, direction: string): void {\n    e.preventDefault();\n    this.resizeImage(e, direction);\n  }\n\n  resizeImage(evt: MouseEvent, direction: string): void {\n    const startX = evt.pageX;\n    const startWidth = this.imgEl.nativeElement.clientWidth;\n\n    const isLeftResize = direction === 'left';\n\n    const { width } = window.getComputedStyle(this.view.dom);\n    const editorWidth = parseInt(width, 10);\n\n    const onMouseMove = (e: MouseEvent) => {\n      const currentX = e.pageX;\n      const diffInPx = currentX - startX;\n      const computedWidth = isLeftResize ? startWidth - diffInPx : startWidth + diffInPx;\n\n      // prevent image overflow the editor\n      // prevent resizng below 20px\n      if (computedWidth > editorWidth || computedWidth < 20) {\n        return;\n      }\n\n      this.outerWidth = `${computedWidth}px`;\n    };\n\n    const onMouseUp = (e: MouseEvent) => {\n      e.preventDefault();\n\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n\n      this.imageResize.emit();\n    };\n\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n  }\n}\n","import { ApplicationRef, ComponentFactoryResolver, ComponentRef, Injector } from '@angular/core';\nimport { Node as ProseMirrorNode } from 'prosemirror-model';\nimport { NodeSelection, Plugin, PluginKey } from 'prosemirror-state';\nimport { EditorView, NodeView } from 'prosemirror-view';\nimport { Subscription } from 'rxjs';\n\nimport { ImageViewComponent } from '../components/image-view/image-view.component';\n\nclass ImageRezieView implements NodeView {\n  dom: HTMLElement;\n  view: EditorView;\n  getPos: () => number;\n\n  applicationRef: ApplicationRef;\n  imageComponentRef: ComponentRef<ImageViewComponent>;\n  resizeSubscription: Subscription;\n\n  node: ProseMirrorNode;\n  updating = false;\n\n  constructor(node: ProseMirrorNode, view: EditorView, getPos: () => number, injector: Injector) {\n    const dom = document.createElement('image-view');\n\n    const componentFactoryResolver = injector.get(ComponentFactoryResolver);\n    this.applicationRef = injector.get(ApplicationRef);\n\n    // Create the component and wire it up with the element\n    const factory = componentFactoryResolver.resolveComponentFactory(ImageViewComponent);\n\n    this.imageComponentRef = factory.create(injector, [], dom);\n    // Attach to the view so that the change detector knows to run\n    this.applicationRef.attachView(this.imageComponentRef.hostView);\n\n    this.setNodeAttributes(node.attrs);\n    this.imageComponentRef.instance.view = view;\n\n    this.dom = dom;\n    this.view = view;\n    this.node = node;\n    this.getPos = getPos;\n\n    this.resizeSubscription = this.imageComponentRef.instance.imageResize.subscribe(() => {\n      this.handleResize();\n    });\n  }\n\n  private computeChanges(prevAttrs: Record<string, any>, newAttrs: Record<string, any>): boolean {\n    return JSON.stringify(prevAttrs) === JSON.stringify(newAttrs);\n  }\n\n  private setNodeAttributes(attrs: Record<string, any>): void {\n    this.imageComponentRef.instance.src = attrs.src;\n    this.imageComponentRef.instance.alt = attrs.alt;\n    this.imageComponentRef.instance.title = attrs.title;\n    this.imageComponentRef.instance.outerWidth = attrs.width;\n  }\n\n  handleResize = (): void => {\n    if (this.updating) {\n      return;\n    }\n\n    const { state, dispatch } = this.view;\n    const { tr } = state;\n\n    const transaction = tr.setNodeMarkup(this.getPos(), undefined, {\n      src: this.imageComponentRef.instance.src,\n      width: this.imageComponentRef.instance.outerWidth\n    });\n\n    const resolvedPos = transaction.doc.resolve(this.getPos());\n    const newSelection = new NodeSelection(resolvedPos);\n\n    transaction.setSelection(newSelection);\n    dispatch(transaction);\n  }\n\n  update(node: ProseMirrorNode): boolean {\n    if (node.type !== this.node.type) {\n      return false;\n    }\n\n    this.node = node;\n\n    const changed = this.computeChanges(this.node.attrs, node.attrs);\n    if (changed) {\n      this.updating = true;\n      this.setNodeAttributes(node.attrs);\n      this.updating = false;\n    }\n    return true;\n  }\n\n  ignoreMutation(): boolean {\n    return true;\n  }\n\n  selectNode(): void {\n    this.imageComponentRef.instance.selected = true;\n  }\n\n  deselectNode(): void {\n    this.imageComponentRef.instance.selected = false;\n  }\n\n  destroy(): void {\n    this.resizeSubscription.unsubscribe();\n    this.applicationRef.detachView(this.imageComponentRef.hostView);\n  }\n}\n\nconst imagePlugin = (injector: Injector): Plugin => {\n  return new Plugin({\n    key: new PluginKey('link'),\n    props: {\n      nodeViews: {\n        image: (node: ProseMirrorNode, view: EditorView, getPos: () => number) => {\n          return new ImageRezieView(node, view, getPos, injector);\n        },\n      }\n    }\n  });\n};\n\nexport default imagePlugin;\n","import { Fragment, Slice, Node as ProseMirrorNode } from 'prosemirror-model';\nimport { Plugin, PluginKey } from 'prosemirror-state';\n\nconst HTTP_LINK_REGEX = /((https?:\\/\\/)?[\\w-]+(\\.[\\w-]+)+\\.?(:\\d+)?(\\/\\S*)?)$/;\n\nconst linkify = (fragment: Fragment): Fragment => {\n  const linkified: ProseMirrorNode[] = [];\n\n  fragment.forEach((child: ProseMirrorNode) => {\n    if (child.isText) {\n      const text = child.text as string;\n      let pos = 0;\n\n      const match: RegExpMatchArray | null = HTTP_LINK_REGEX.exec(text);\n\n      if (match) {\n        const start = match.index;\n        const end = start + match[0].length;\n        const link = child.type.schema.marks.link;\n\n        if (start > 0) {\n          linkified.push(child.cut(pos, start));\n        }\n\n        const urlText = text.slice(start, end);\n        linkified.push(\n          child.cut(start, end).mark(link.create({ href: urlText }).addToSet(child.marks))\n        );\n        pos = end;\n      }\n\n      if (pos < text.length) {\n        linkified.push(child.cut(pos));\n      }\n    } else {\n      linkified.push(child.copy(linkify(child.content)));\n    }\n  });\n\n  return Fragment.fromArray(linkified);\n};\n\nconst linkPlugin = ():Plugin => {\n  return new Plugin({\n    key: new PluginKey('link'),\n    props: {\n      transformPasted: (slice: Slice) => {\n        return new Slice(linkify(slice.content), slice.openStart, slice.openEnd);\n      }\n    }\n  });\n};\n\nexport default linkPlugin;\n","import { DOMSerializer, Schema, DOMParser, Node as ProseMirrorNode } from 'prosemirror-model';\n\nimport defaultSchema from './schema';\n\nexport const emptyDoc = {\n  type: 'doc',\n  content: [\n    {\n      type: 'paragraph',\n    }\n  ],\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\nexport const toHTML = (json: Record<string, any>, inputSchema?: Schema): string => {\n  const schema = inputSchema ?? defaultSchema;\n\n  const contentNode = schema.nodeFromJSON(json);\n  const html = DOMSerializer.fromSchema(schema).serializeFragment(contentNode.content);\n\n  const div = document.createElement('div');\n  div.appendChild(html);\n  return div.innerHTML;\n};\n\nexport const toDoc = (html: string, inputSchema?: Schema): Record<string, any> => {\n  const schema = inputSchema ?? defaultSchema;\n\n  const el = document.createElement('div');\n  el.innerHTML = html;\n\n  return DOMParser.fromSchema(schema).parse(el).toJSON();\n};\n\nexport const parseContent = (value: string | Record<string, any> | null, schema: Schema): ProseMirrorNode => {\n  if (!value) {\n    return schema.nodeFromJSON(emptyDoc);\n  }\n\n  if (typeof value !== 'string') {\n    return schema.nodeFromJSON(value);\n  }\n\n  const docJson = toDoc(value, schema);\n  return schema.nodeFromJSON(docJson);\n};\n","import {\n  Component, ViewChild, ElementRef,\n  forwardRef, OnDestroy, ViewEncapsulation,\n  OnInit, Output, EventEmitter,\n  Input, Renderer2, SimpleChanges,\n  OnChanges, Injector,\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\nimport { Subscription } from 'rxjs';\n\nimport * as plugins from './plugins';\nimport { toHTML } from './parsers';\nimport Editor from './Editor';\n\n@Component({\n  selector: 'ngx-editor',\n  templateUrl: './editor.component.html',\n  styleUrls: ['./editor.component.scss'],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => NgxEditorComponent),\n    multi: true\n  }],\n  encapsulation: ViewEncapsulation.None\n})\n\nexport class NgxEditorComponent implements ControlValueAccessor, OnInit, OnChanges, OnDestroy {\n  constructor(\n    private _renderer: Renderer2,\n    private _injector: Injector,\n    private _elementRef: ElementRef<HTMLElement>\n  ) { }\n\n  @ViewChild('ngxEditor', { static: true }) private ngxEditor: ElementRef;\n\n  @Input() editor: Editor;\n  @Input() outputFormat: 'doc' | 'html';\n  @Input() placeholder = 'Type Here...';\n\n  @Output() focusOut = new EventEmitter<void>();\n  @Output() focusIn = new EventEmitter<void>();\n\n  private subscriptions: Subscription[] = [];\n  private onChange: (value: Record<string, any> | string) => void = () => { /** */ };\n  private onTouched: () => void = () => { /** */ };\n\n  writeValue(value: Record<string, any> | string | null): void {\n    if (!this.outputFormat && typeof value === 'string') {\n      this.outputFormat = 'html';\n    }\n\n    this.editor.setContent(value);\n  }\n\n  registerOnChange(fn: () => void): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.setMeta('UPDATE_EDITABLE', !isDisabled);\n    this._renderer.setProperty(this._elementRef.nativeElement, 'disabled', isDisabled);\n  }\n\n  private handleChange(jsonDoc: Record<string, any>): void {\n    if (this.outputFormat === 'html') {\n      const html = toHTML(jsonDoc, this.editor.schema);\n      this.onChange(html);\n      return;\n    }\n\n    this.onChange(jsonDoc);\n  }\n\n  private setMeta(key: string, value: any): void {\n    const { dispatch, state: { tr } } = this.editor.view;\n    dispatch(tr.setMeta(key, value));\n  }\n\n  private setPlaceholder(placeholder: string): void {\n    this.setMeta('UPDATE_PLACEHOLDER', placeholder);\n  }\n\n  private registerPlugins(): void {\n    this.editor.registerPlugin(plugins.editable());\n    this.editor.registerPlugin(plugins.placeholder(this.placeholder));\n\n    this.editor.registerPlugin(plugins.attributes({\n      class: 'NgxEditor__Content'\n    }));\n\n    this.editor.registerPlugin(plugins.focus(() => {\n      this.focusIn.emit();\n    }));\n\n    this.editor.registerPlugin(plugins.focus(() => {\n      this.focusIn.emit();\n    }));\n\n    this.editor.registerPlugin(plugins.blur(() => {\n      this.focusOut.emit();\n      this.onTouched();\n    }));\n\n    this.editor.registerPlugin(plugins.image(this._injector));\n    this.editor.registerPlugin(plugins.link());\n  }\n\n  ngOnInit(): void {\n    if (!this.editor) {\n      throw new Error('NgxEditor: Required editor instance');\n    }\n\n    this.registerPlugins();\n\n    this._renderer.appendChild(this.ngxEditor.nativeElement, this.editor.view.dom);\n\n    const contentChangeSubscription = this.editor.valueChanges.subscribe(jsonDoc => {\n      this.handleChange(jsonDoc);\n    });\n\n    this.subscriptions.push(contentChangeSubscription);\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes?.placeholder && !changes.placeholder.isFirstChange()) {\n      this.setPlaceholder(changes.placeholder.currentValue);\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.forEach(subscription => {\n      subscription.unsubscribe();\n    });\n  }\n}\n","import { Injectable, TemplateRef } from '@angular/core';\nimport { Subject } from 'rxjs';\n\nimport Editor from '../../Editor';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MenuService {\n  editor: Editor;\n  customMenuRefChange: Subject<TemplateRef<any>> = new Subject<TemplateRef<any>>();\n\n  setCustomMenuRef(c: TemplateRef<any>): void {\n    this.customMenuRefChange.next(c);\n  }\n}\n","import {\n  Component, Input,\n  OnInit, TemplateRef\n} from '@angular/core';\n\nimport { Toolbar, ToolbarItem, ToolbarDropdown } from '../../types';\n\nimport { MenuService } from './menu.service';\nimport Editor from '../../Editor';\n\nconst DEFAULT_TOOLBAR: Toolbar = [\n  ['bold', 'italic'],\n  ['code', 'blockquote'],\n  ['underline', 'strike'],\n  ['ordered_list', 'bullet_list'],\n  [{ heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] }],\n  ['link', 'image'],\n  ['text_color', 'background_color'],\n  ['align_left', 'align_center', 'align_right', 'align_justify'],\n];\n\nconst DEFAULT_COLOR_PRESETS = [\n  '#b60205',\n  '#d93f0b',\n  '#fbca04',\n  '#0e8a16',\n  '#006b75',\n  '#1d76db',\n  '#0052cc',\n  '#5319e7',\n  '#e99695',\n  '#f9d0c4',\n  '#fef2c0',\n  '#c2e0c6',\n  '#bfdadc',\n  '#c5def5',\n  '#bfd4f2',\n  '#d4c5f9'\n];\n\n@Component({\n  selector: 'ngx-editor-menu',\n  templateUrl: './menu.component.html',\n  styleUrls: ['./menu.component.scss'],\n  providers: [MenuService]\n})\n\nexport class MenuComponent implements OnInit {\n  @Input() toolbar: Toolbar = DEFAULT_TOOLBAR;\n  @Input() colorPresets: string[] = DEFAULT_COLOR_PRESETS;\n  @Input() disabled = false;\n  @Input() editor: Editor;\n  @Input() customMenuRef: TemplateRef<any> | null = null;\n  @Input() dropdownPlacement: 'top' | 'bottom' = 'bottom';\n\n  toggleCommands: any[] = [\n    'bold', 'italic',\n    'underline', 'strike',\n    'code', 'blockquote',\n    'ordered_list', 'bullet_list',\n    'align_left', 'align_center', 'align_right', 'align_justify'\n  ];\n\n  iconContainerClass = ['NgxEditor__MenuItem', 'NgxEditor__MenuItem--Icon'];\n  dropdownContainerClass = ['NgxEditor__Dropdown'];\n  seperatorClass = ['NgxEditor__Seperator'];\n\n  constructor(private menuService: MenuService) { }\n\n  get presets(): string[][] {\n    const col = 8;\n    const colors: string[][] = [];\n\n    this.colorPresets.forEach((color, index) => {\n      const row = Math.floor(index / col);\n\n      if (!colors[row]) {\n        colors.push([]);\n      }\n\n      colors[row].push(color);\n    });\n\n    return colors;\n  }\n\n  isDropDown(item: ToolbarItem): boolean {\n    if ((item as ToolbarDropdown)?.heading) {\n      return true;\n    }\n\n    return false;\n  }\n\n  getDropdownItems(item: ToolbarItem): ToolbarDropdown {\n    return item as ToolbarDropdown;\n  }\n\n  ngOnInit(): void {\n    if (!this.editor) {\n      throw new Error('NgxEditor: Required editor instance');\n    }\n\n    this.menuService.editor = this.editor;\n  }\n}\n","export default `\n  <path d=\"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z\" />\n`;\n","export default `\n  <path d=\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z\" />\n`;\n","export default `\n<path d=\"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\"/>\n`;\n","export default `\n<path d=\"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z\"/>\n`;\n","export default `\n<path d=\"M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z\"/>\n`;\n","export default `\n<path d=\"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z\"/>\n`;\n","export default `\n<path d=\"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z\"/>\n`;\n","export default `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z\"/>\n`;\n","export default `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"/>\n`;\n","export default `\n<path d=\"M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z\"/>\n`;\n","export default `\n<path d=\"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\"/>\n`;\n","export default `\n<path d=\"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z\"/>\n`;\n","export default `\n<path d=\"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z\"/>\n`;\n","export default `\n<path d=\"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z\"/>\n`;\n","export default `\n<path d=\"M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z\"/>\n`;\n","export default `\n<path d=\"M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z\"/>\n`;\n","export default `\n<path d=\"M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z\"/>\n`;\n","// Icons source: https://material.io/\n\nimport bold from './bold';\nimport italic from './italic';\nimport code from './code';\nimport underline from './underline';\nimport strike from './strike';\nimport orderedList from './ordered_list';\nimport bulletList from './bullet_list';\nimport quote from './quote';\nimport link from './link';\nimport unlink from './unlink';\nimport image from './image';\nimport alignLeft from './align_left';\nimport alignCenter from './align_center';\nimport alignRight from './align_right';\nimport alignJustify from './align_justify';\nimport textColor from './text_color';\nimport colorFill from './color_fill';\n\nconst DEFAULT_ICON_HEIGHT = 20;\nconst DEFAULT_ICON_WIDTH = 20;\n\nconst icons: Record<string, any> = {\n  bold,\n  italic,\n  code,\n  underline,\n  strike,\n  ordered_list: orderedList,\n  bullet_list: bulletList,\n  blockquote: quote,\n  link,\n  unlink,\n  image,\n  align_left: alignLeft,\n  align_center: alignCenter,\n  align_right: alignRight,\n  align_justify: alignJustify,\n  text_color: textColor,\n  color_fill: colorFill\n};\n\nclass Icon {\n  static get(name: keyof typeof icons, fill = '#000'): string {\n    const path = icons[name] || '<path></path>';\n    return `\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n        fill=${fill}\n        height=${DEFAULT_ICON_HEIGHT}\n        width=${DEFAULT_ICON_WIDTH}\n      >\n        ${path}\n      </svg>\n    `;\n  }\n\n  static getPath(name: keyof typeof icons): string {\n    const path = icons[name] || '<path></path>';\n    return path;\n  }\n\n}\n\nexport default Icon;\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'sanitizeHtml'\n})\n\nexport class SanitizeHtmlPipe implements PipeTransform {\n\n  constructor(private sanitizer: DomSanitizer) { }\n\n  transform(value: string): SafeHtml {\n    return this.sanitizer.bypassSecurityTrustHtml(value);\n  }\n}\n","import {\n  Component, ElementRef, HostBinding,\n  HostListener, Input, OnDestroy, OnInit\n} from '@angular/core';\nimport { SafeHtml } from '@angular/platform-browser';\nimport { NodeSelection } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { asyncScheduler, fromEvent, Subscription } from 'rxjs';\nimport { throttleTime } from 'rxjs/operators';\n\nimport Editor from '../../../Editor';\nimport Icon from '../../../icons';\nimport { TBItems } from '../../../types';\nimport { SanitizeHtmlPipe } from '../../../pipes/sanitize/sanitize-html.pipe';\n\ninterface BubblePosition {\n  top: number;\n  left: number;\n}\n\n@Component({\n  selector: 'ngx-editor-floating-menu',\n  templateUrl: './floating-menu.component.html',\n  styleUrls: ['./floating-menu.component.scss']\n})\nexport class FloatingMenuComponent implements OnInit, OnDestroy {\n\n  constructor(public el: ElementRef<HTMLElement>, private sanitizeHTML: SanitizeHtmlPipe) { }\n\n  @HostBinding('style') get display(): Partial<CSSStyleDeclaration> {\n    return {\n      visibility: this.showMenu ? 'visible' : 'hidden',\n      opacity: this.showMenu ? '1' : '0',\n      top: this.posTop + 'px',\n      left: this.posLeft + 'px',\n    };\n  }\n\n  private get view(): EditorView {\n    return this.editor.view;\n  }\n\n  @Input() editor: Editor;\n\n  private posLeft = 0;\n  private posTop = 0;\n  private showMenu = false;\n  private updateSubscription: Subscription;\n  private dragging = false;\n  private resizeSubscription: Subscription;\n  execulableItems: TBItems[] = [];\n  activeItems: TBItems[] = [];\n\n  @HostListener('document:mousedown', ['$event']) onMouseDown(e: MouseEvent): void {\n    if (this.el.nativeElement.contains(e.target as Node)) {\n      e.preventDefault();\n      return;\n    }\n    this.dragging = true;\n  }\n\n  @HostListener('document:keydown') onKeyDown(): void {\n    this.dragging = true;\n    this.hide();\n  }\n\n  @HostListener('document:mouseup') onMouseUp(): void {\n    this.dragging = false;\n    this.useUpdate();\n  }\n\n  @HostListener('document:keyup') onKeyUp(): void {\n    this.dragging = false;\n    this.useUpdate();\n  }\n\n  private useUpdate(): void {\n    if (!this.view) {\n      return;\n    }\n\n    this.update(this.view);\n  }\n\n  getIcon(name: TBItems): SafeHtml {\n    const icon = Icon.getPath(name);\n    return this.sanitizeHTML.transform(icon);\n  }\n\n  private hide(): void {\n    this.showMenu = false;\n  }\n\n  private show(): void {\n    this.showMenu = true;\n  }\n\n  private calculateBubblePosition(view: EditorView): BubblePosition {\n    const { state: { selection } } = view;\n    const { from } = selection;\n\n    // the floating bubble itself\n    const bubbleEl = this.el.nativeElement;\n    const bubble = bubbleEl.getBoundingClientRect();\n\n    // The box in which the tooltip is positioned, to use as base\n    const box = bubbleEl.parentElement.getBoundingClientRect();\n\n    const start = view.coordsAtPos(from);\n\n    let left = start.left - box.left;\n\n    const overflowsRight = (\n      box.right < (start.left + bubble.width) ||\n      bubble.right > box.right\n    );\n\n    if (overflowsRight) {\n      left = box.width - bubble.width;\n    }\n\n    if (left < 0) {\n      left = 0;\n    }\n\n    const bubbleHeight = bubble.height + parseInt(getComputedStyle(bubbleEl).marginBottom, 10);\n    const top = (start.top - box.top) - bubbleHeight;\n\n    return {\n      left,\n      top\n    };\n  }\n\n  private update(view: EditorView): void {\n    const { state } = view;\n    const { selection } = state;\n    const { empty } = selection;\n\n    if (selection instanceof NodeSelection) {\n      if (selection.node.type.name === 'image') {\n        this.hide();\n        return;\n      }\n    }\n\n    const hasFocus = this.view.hasFocus();\n\n    if (!hasFocus || empty || this.dragging) {\n      this.hide();\n      return;\n    }\n\n    const { top, left } = this.calculateBubblePosition(this.view);\n\n    this.posLeft = left;\n    this.posTop = top;\n\n    this.show();\n  }\n\n  ngOnInit(): void {\n    if (!this.editor) {\n      throw new Error('NgxEditor: Required editor instance');\n    }\n\n    this.updateSubscription = this.editor.update\n      .subscribe((view) => {\n        this.update(view);\n      });\n\n    this.resizeSubscription = fromEvent(window, 'resize').pipe(\n      throttleTime(500, asyncScheduler, { leading: true, trailing: true })\n    ).subscribe(() => {\n      this.useUpdate();\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.updateSubscription.unsubscribe();\n    this.resizeSubscription.unsubscribe();\n  }\n}\n","const defaults: Record<string, string> = {\n  // menu\n  bold: 'Bold',\n  italic: 'Italic',\n  code: 'Code',\n  underline: 'Underline',\n  strike: 'Strike',\n  blockquote: 'Blockquote',\n  bullet_list: 'Bullet List',\n  ordered_list: 'Ordered List',\n  heading: 'Heading',\n  h1: 'Header 1',\n  h2: 'Header 2',\n  h3: 'Header 3',\n  h4: 'Header 4',\n  h5: 'Header 5',\n  h6: 'Header 6',\n  align_left: 'Left Align',\n  align_center: 'Center Align',\n  align_right: 'Right Align',\n  align_justify: 'Justify',\n  text_color: 'Text Color',\n  background_color: 'Background Color',\n\n  // pupups, forms, others...\n  url: 'URL',\n  text: 'Text',\n  openInNewTab: 'Open in new tab',\n  insert: 'Insert',\n  altText: 'Alt Text',\n  title: 'Title',\n  remove: 'Remove',\n};\n\nexport type LocalsKeys = keyof typeof defaults;\n\nclass Locals {\n  locals = defaults;\n\n  constructor(newLocals: Partial<Record<LocalsKeys, string>> = {}) {\n    this.locals = Object.assign({}, defaults, newLocals);\n  }\n\n  get = (key: string):string => {\n    return this.locals[key] ?? '';\n  }\n}\n\nexport default Locals;\n","import { Injectable, Optional } from '@angular/core';\n\nimport { NgxEditorConfig} from './types';\nimport Locals from './Locals';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxEditorServiceConfig {\n  public locals = {};\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxEditorService {\n  config: NgxEditorServiceConfig;\n\n  constructor(@Optional() config?: NgxEditorServiceConfig) {\n    this.config = config;\n  }\n\n  get locals(): Locals {\n    return new Locals(this.config.locals);\n  }\n}\n\nexport const provideMyServiceOptions = (config?: NgxEditorConfig): NgxEditorServiceConfig => {\n  return {\n    locals: config.locals ?? {}\n  };\n};\n","import { MarkType } from 'prosemirror-model';\nimport { EditorState, Transaction } from 'prosemirror-state';\nimport { Command, toggleMark } from 'prosemirror-commands';\n\nimport { applyMark } from 'ngx-editor/commands';\nimport { isMarkActive } from 'ngx-editor/helpers';\n\nclass Mark {\n  name: string;\n\n  constructor(name: string) {\n    this.name = name;\n  }\n\n  apply(): Command {\n    return (state: EditorState, dispatch?: (tr: Transaction) => void): boolean => {\n\n      const { schema } = state;\n\n      const type: MarkType = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n\n      return applyMark(type)(state, dispatch);\n    };\n  }\n\n  toggle(): Command {\n    return (state: EditorState, dispatch?: (tr: Transaction) => void): boolean => {\n\n      const { schema } = state;\n\n      const type: MarkType = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n\n      return toggleMark(type)(state, dispatch);\n    };\n  }\n\n  isActive(state: EditorState): boolean {\n    const { schema } = state;\n\n    const type: MarkType = schema.marks[this.name];\n\n    if (!type) {\n      return false;\n    }\n\n    return isMarkActive(state, type);\n  }\n\n  canExecute(state: EditorState): boolean {\n    return this.toggle()(state);\n  }\n}\n\nexport default Mark;\n","import { NodeType } from 'prosemirror-model';\nimport { EditorState, Transaction } from 'prosemirror-state';\nimport { Command, lift, wrapIn } from 'prosemirror-commands';\n\nimport { isNodeActive } from 'ngx-editor/helpers';\n\nclass Blockqote {\n  toggle(): Command {\n    return (state: EditorState, dispatch?: (tr: Transaction) => void): boolean => {\n      const { schema } = state;\n\n      const type: NodeType = schema.nodes.blockquote;\n      if (!type) {\n        return false;\n      }\n\n      if (this.isActive(state)) {\n        return lift(state, dispatch);\n      }\n\n      return wrapIn(type)(state, dispatch);\n    };\n  }\n\n  isActive(state: EditorState): boolean {\n    const { schema } = state;\n\n    const type: NodeType = schema.nodes.blockquote;\n    if (!type) {\n      return false;\n    }\n\n    return isNodeActive(state, type);\n  }\n\n  canExecute(state: EditorState): boolean {\n    return this.toggle()(state);\n  }\n}\n\nexport default Blockqote;\n","import { NodeType, Schema } from 'prosemirror-model';\nimport { EditorState, Transaction } from 'prosemirror-state';\nimport { liftListItem, wrapInList } from 'prosemirror-schema-list';\nimport { Command } from 'prosemirror-commands';\n\nimport { isNodeActive } from 'ngx-editor/helpers';\n\nclass ListItem {\n  isBulletList = false;\n\n  constructor(isBulletList = false) {\n    this.isBulletList = isBulletList;\n  }\n\n  getType(schema: Schema): NodeType {\n    return this.isBulletList ? schema.nodes.bullet_list : schema.nodes.ordered_list;\n  }\n\n  toggle(): Command {\n    return (state: EditorState, dispatch?: (tr: Transaction) => void): boolean => {\n\n      const { schema } = state;\n\n      const type = this.getType(schema);\n      if (!type) {\n        return false;\n      }\n\n      if (this.isActive(state)) {\n        return liftListItem(schema.nodes.list_item)(state, dispatch);\n      }\n\n      return wrapInList(type)(state, dispatch);\n    };\n  }\n\n  isActive(state: EditorState): boolean {\n    const { schema } = state;\n\n    const type = this.getType(schema);\n    if (!type) {\n      return false;\n    }\n\n    return isNodeActive(state, type);\n  }\n\n  canExecute(state: EditorState): boolean {\n    return this.toggle()(state);\n  }\n}\n\nexport default ListItem;\n","import { NodeType, Node as ProseMirrorNode } from 'prosemirror-model';\nimport { EditorState, Transaction } from 'prosemirror-state';\nimport { Command, setBlockType } from 'prosemirror-commands';\n\nimport { getSelectionNodes } from 'ngx-editor/helpers';\n\nexport type HeadingLevels = 1 | 2 | 3 | 4 | 5 | 6;\n\nclass Heading {\n  level: number;\n\n  constructor(level: HeadingLevels) {\n    this.level = level;\n  }\n\n  apply(): Command {\n    return (state: EditorState, dispatch?: (tr: Transaction) => void): boolean => {\n\n      const { schema } = state;\n\n      const type: NodeType = schema.nodes.heading;\n      if (!type) {\n        return false;\n      }\n\n      return setBlockType(type)(state, dispatch);\n    };\n  }\n\n  toggle(): Command {\n    return (state: EditorState, dispatch?: (tr: Transaction) => void): boolean => {\n\n      const { schema, selection, doc } = state;\n\n      const type: NodeType = schema.nodes.heading;\n      if (!type) {\n        return false;\n      }\n\n      const nodePos = selection.$from.before(1);\n      const node = doc.nodeAt(nodePos);\n\n      const attrs = node?.attrs ?? {};\n\n      if (this.isActive(state)) {\n        return setBlockType(schema.nodes.paragraph, attrs)(state, dispatch);\n      }\n\n      return setBlockType(type, { ...attrs, level: this.level })(state, dispatch);\n    };\n  }\n\n  isActive(state: EditorState): boolean {\n    const { schema } = state;\n    const nodesInSelection = getSelectionNodes(state);\n\n    const type: NodeType = schema.nodes.heading;\n    if (!type) {\n      return false;\n    }\n\n    const supportedNodes = [\n      type,\n      schema.nodes.text,\n      schema.nodes.blockquote\n    ];\n\n    // heading is a text node\n    // don't mark as active when it has more nodes\n    const nodes = nodesInSelection.filter(node => {\n      return supportedNodes.includes(node.type);\n    });\n\n    const acitveNode = nodes.find((node: ProseMirrorNode) => {\n      return node.attrs.level === this.level;\n    });\n\n    return Boolean(acitveNode);\n  }\n\n  canExecute(state: EditorState): boolean {\n    return this.toggle()(state);\n  }\n}\n\nexport default Heading;\n","import { EditorState, Transaction } from 'prosemirror-state';\nimport { Node } from 'prosemirror-model';\nimport { Command } from 'prosemirror-commands';\n\nimport { getSelectionNodes } from 'ngx-editor/helpers';\n\nexport type Align = 'left' | 'center' | 'right' | 'justify';\n\nclass TextAlign {\n  align: string;\n\n  constructor(align: Align) {\n    this.align = align;\n  }\n\n  toggle(): Command {\n    return (state: EditorState, dispatch?: (tr: Transaction) => void): boolean => {\n\n      const { doc, selection, tr, schema } = state;\n      const { from, to } = selection;\n\n      let applicable = false;\n\n      doc.nodesBetween(from, to, (node, pos) => {\n        const nodeType = node.type;\n        if ([schema.nodes.paragraph, schema.nodes.heading].includes(nodeType)) {\n          applicable = true;\n          tr.setNodeMarkup(pos, nodeType, { ...node.attrs, align: this.align });\n        }\n        return true;\n      });\n\n      if (!applicable) {\n        return false;\n      }\n\n      if (tr.docChanged) {\n        dispatch?.(tr);\n      }\n\n      return true;\n    };\n  }\n\n  isActive(state: EditorState): boolean {\n    const nodes = getSelectionNodes(state);\n\n    const active = nodes.find((node: Node) => {\n      return node.attrs.align === this.align;\n    });\n\n    return Boolean(active);\n  }\n\n  canExecute(state: EditorState): boolean {\n    return this.toggle()(state);\n  }\n}\n\nexport default TextAlign;\n","import { MarkType } from 'prosemirror-model';\nimport { EditorState } from 'prosemirror-state';\nimport { Command, toggleMark } from 'prosemirror-commands';\n\nimport { isMarkActive } from 'ngx-editor/helpers';\nimport { removeLink } from 'ngx-editor/commands';\nimport { Dispatch } from './types';\n\nconst defaultOptions = {\n  strict: true\n};\n\nexport interface LinkAttrs {\n  href: string;\n  title?: string;\n  target?: string;\n}\n\nclass Link {\n  update(attrs = {}): Command {\n    return (state: EditorState, dispatch?: Dispatch): boolean => {\n      const { schema, selection } = state;\n\n      const type: MarkType = schema.marks.link;\n      if (!type) {\n        return false;\n      }\n\n      if (selection.empty) {\n        return false;\n      }\n\n      return toggleMark(type, attrs)(state, dispatch);\n    };\n  }\n\n  insert(text: string, attrs: LinkAttrs): Command {\n    return (state: EditorState, dispatch?: Dispatch): boolean => {\n      const { schema, tr } = state;\n\n      const type: MarkType = schema.marks.link;\n      if (!type) {\n        return false;\n      }\n\n      const linkAttrs: LinkAttrs = {\n        href: attrs.href,\n        title: attrs.title ?? text,\n        target: attrs.target ?? '_blank'\n      };\n\n      const node = schema.text(text, [schema.marks.link.create(linkAttrs)]);\n\n      tr.replaceSelectionWith(node, false)\n        .scrollIntoView();\n\n      if (tr.docChanged) {\n        dispatch?.(tr);\n        return true;\n      }\n\n      return false;\n    };\n  }\n\n  isActive(state: EditorState, options = defaultOptions): boolean {\n    if (options.strict) {\n      return true;\n    }\n\n    const { schema } = state;\n    const type = schema.marks.link;\n\n    if (!type) {\n      return false;\n    }\n\n    return isMarkActive(state, type);\n  }\n\n  remove(state: EditorState, dispatch?: Dispatch): boolean {\n    return removeLink()(state, dispatch);\n  }\n\n  canExecute(state: EditorState): boolean {\n    return this.update({})(state);\n  }\n}\n\nexport default Link;\n","import { EditorState, NodeSelection } from 'prosemirror-state';\nimport { Command } from 'prosemirror-commands';\n\nimport { Dispatch } from './types';\n\nexport interface ImageAttrs {\n  alt?: string;\n  title?: string;\n  width?: string;\n}\n\nclass Image {\n  insert(src: string, attrs: ImageAttrs): Command {\n    return (state: EditorState, dispatch?: Dispatch): boolean => {\n      const { schema, tr, selection } = state;\n\n      const type = schema.nodes.image;\n      if (!type) {\n        return false;\n      }\n\n      const imageAttrs = {\n        width: null,\n        src,\n        ...attrs\n      };\n\n      if (!imageAttrs.width && selection instanceof NodeSelection && selection.node.type === type) {\n        imageAttrs.width = selection.node.attrs.width;\n      }\n\n      tr.replaceSelectionWith(type.createAndFill(imageAttrs));\n\n      const resolvedPos = tr.doc.resolve(\n        tr.selection.anchor - tr.selection.$anchor.nodeBefore.nodeSize\n      );\n\n      tr\n        .setSelection(new NodeSelection(resolvedPos))\n        .scrollIntoView();\n\n      if (tr.docChanged) {\n        dispatch?.(tr);\n        return true;\n      }\n\n      return false;\n    };\n  }\n\n  isActive(state: EditorState): boolean {\n    const { selection } = state;\n    if (selection instanceof NodeSelection) {\n      return selection.node.type.name === 'image';\n    }\n\n    return false;\n  }\n}\n\nexport default Image;\n","import { MarkType } from 'prosemirror-model';\nimport { EditorState } from 'prosemirror-state';\nimport { Command } from 'prosemirror-commands';\n\nimport { getSelectionMarks, isMarkActive } from 'ngx-editor/helpers';\nimport { applyMark, removeMark } from 'ngx-editor/commands';\n\nimport { Dispatch } from './types';\n\ntype Name = 'text_color' | 'text_background_color';\n\ninterface ColorAttrs {\n  color: string;\n}\n\ninterface BackgroundColorAttrs {\n  backgroundColor: string;\n}\n\nclass TextColor {\n  name: Name;\n\n  constructor(name: Name) {\n    this.name = name;\n  }\n\n  apply(attrs: ColorAttrs | BackgroundColorAttrs): Command {\n    return (state: EditorState, dispatch?: Dispatch): boolean => {\n      const { schema, selection, doc } = state;\n\n      const type: MarkType = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n\n      const { from, to, empty } = selection;\n\n      if (!empty && (from + 1 === to)) {\n        const node = doc.nodeAt(from);\n        if (node?.isAtom && !node.isText && node.isLeaf) {\n          // An atomic node (e.g. Image) is selected.\n          return false;\n        }\n      }\n\n      return applyMark(type, attrs)(state, dispatch);\n    };\n  }\n\n  isActive(state: EditorState): boolean {\n    const { schema } = state;\n    const type: MarkType = schema.marks[this.name];\n\n    if (!type) {\n      return false;\n    }\n\n    return isMarkActive(state, type);\n  }\n\n  getActiveColors(state: EditorState): string[] {\n    if (!this.isActive(state)) {\n      return [];\n    }\n\n    const { schema } = state;\n    const marks = getSelectionMarks(state);\n\n    const colors = marks\n      .filter(mark => mark.type === schema.marks[this.name])\n      .map(mark => mark.attrs.color)\n      .filter(Boolean);\n\n    return colors;\n  }\n\n  remove(): Command {\n    return (state: EditorState, dispatch?: Dispatch): boolean => {\n      const { schema } = state;\n\n      const type = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n\n      return removeMark(type)(state, dispatch);\n    };\n  }\n\n  canExecute(state: EditorState): boolean {\n    const attrs = this.name === 'text_color' ? { color: '' } : { backgroundColor: '' };\n    return this.apply(attrs)(state);\n  }\n}\n\nexport default TextColor;\n","import Mark from './Mark';\nimport Blockquote from './Blockquote';\nimport ListItem from './ListItem';\nimport Heading from './Heading';\nimport TextAlign from './TextAlign';\nimport Link from './Link';\nimport Image from './Image';\nimport TextColor from './TextColor';\n\nexport const STRONG = new Mark('strong');\nexport const EM = new Mark('em');\nexport const CODE = new Mark('code');\nexport const UNDERLINE = new Mark('u');\nexport const STRIKE = new Mark('s');\nexport const BLOCKQUOTE = new Blockquote();\nexport const UL = new ListItem(true);\nexport const OL = new ListItem(false);\nexport const H1 = new Heading(1);\nexport const H2 = new Heading(2);\nexport const H3 = new Heading(3);\nexport const H4 = new Heading(4);\nexport const H5 = new Heading(5);\nexport const H6 = new Heading(6);\nexport const ALIGN_LEFT = new TextAlign('left');\nexport const ALIGN_CENTER = new TextAlign('center');\nexport const ALIGN_RIGHT = new TextAlign('right');\nexport const ALIGN_JUSTIFY = new TextAlign('justify');\nexport const LINK = new Link();\nexport const IMAGE = new Image();\nexport const TEXT_COLOR = new TextColor('text_color');\nexport const TEXT_BACKGROUND_COLOR = new TextColor('text_background_color');\n","import * as Commands from '../../commands';\n\nimport { ToggleCommand } from '../../commands/types';\n\nexport const ToggleCommands: Record<string, ToggleCommand> = {\n  bold: Commands.STRONG,\n  italic: Commands.EM,\n  code: Commands.CODE,\n  underline: Commands.UNDERLINE,\n  strike: Commands.STRIKE,\n  blockquote: Commands.BLOCKQUOTE,\n  bullet_list: Commands.UL,\n  ordered_list: Commands.OL,\n  h1: Commands.H1,\n  h2: Commands.H2,\n  h3: Commands.H3,\n  h4: Commands.H4,\n  h5: Commands.H5,\n  h6: Commands.H6,\n  align_left: Commands.ALIGN_LEFT,\n  align_center: Commands.ALIGN_CENTER,\n  align_right: Commands.ALIGN_RIGHT,\n  align_justify: Commands.ALIGN_JUSTIFY\n};\n\nexport const Link = Commands.LINK;\nexport const Image = Commands.IMAGE;\nexport const TextColor = Commands.TEXT_COLOR;\nexport const TextBackgroundColor = Commands.TEXT_BACKGROUND_COLOR;\n","import { Component, HostBinding, Input, OnDestroy, OnInit } from '@angular/core';\nimport { EditorView } from 'prosemirror-view';\nimport { Subscription } from 'rxjs';\n\nimport Icon from '../../../icons';\nimport { ToggleCommands } from '../MenuCommands';\nimport { NgxEditorService } from '../../../editor.service';\nimport { MenuService } from '../menu.service';\nimport { TBItems, ToolbarItem } from '../../../types';\n\n@Component({\n  selector: 'ngx-toggle-command',\n  templateUrl: './toggle-command.component.html',\n  styleUrls: ['./toggle-command.component.scss']\n})\n\nexport class ToggleCommandComponent implements OnInit, OnDestroy {\n  @Input() toolbarItem: ToolbarItem;\n\n  get name(): TBItems {\n    return this.toolbarItem as TBItems;\n  }\n\n  html: string;\n  editorView: EditorView;\n  private updateSubscription: Subscription;\n\n  constructor(\n    private ngxeService: NgxEditorService,\n    private menuService: MenuService\n  ) { }\n\n  @HostBinding('class.NgxEditor__MenuItem--Active') isActive = false;\n  @HostBinding('class.NgxEditor--Disabled') disabled = false;\n\n  toggle(e: MouseEvent): void {\n    e.preventDefault();\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    const { state, dispatch } = this.editorView;\n    const command = ToggleCommands[this.name];\n    command.toggle()(state, dispatch);\n  }\n\n  update = (view: EditorView): void => {\n    const { state } = view;\n    const command = ToggleCommands[this.name];\n    this.isActive = command.isActive(state);\n    this.disabled = !command.canExecute(state);\n  }\n\n  getTitle(name: string): string {\n    return this.ngxeService.locals.get(name);\n  }\n\n  ngOnInit(): void {\n    this.html = Icon.get(this.name);\n\n    this.editorView = this.menuService.editor.view;\n\n    this.updateSubscription = this.menuService.editor.update.subscribe((view: EditorView) => {\n      this.update(view);\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.updateSubscription.unsubscribe();\n  }\n}\n","import {\n  Component, ElementRef, HostBinding,\n  HostListener, OnDestroy, OnInit\n} from '@angular/core';\nimport { AbstractControl, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { EditorView } from 'prosemirror-view';\nimport { Subscription } from 'rxjs';\n\nimport { NgxEditorService } from '../../../editor.service';\nimport { MenuService } from '../menu.service';\nimport Icon from '../../../icons';\nimport { Link as LinkCommand } from '../MenuCommands';\n\n@Component({\n  selector: 'ngx-link',\n  templateUrl: './link.component.html',\n  styleUrls: ['./link.component.scss']\n})\n\nexport class LinkComponent implements OnInit, OnDestroy {\n  showPopup = false;\n  isActive = false;\n  private canExecute = true;\n  private editorView: EditorView;\n  private updateSubscription: Subscription;\n\n  form = new FormGroup({\n    href: new FormControl('', [\n      Validators.required,\n      Validators.pattern('(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/?')\n    ]),\n    text: new FormControl('', [Validators.required]),\n    openInNewTab: new FormControl(true)\n  });\n\n  constructor(\n    private el: ElementRef,\n    private ngxeService: NgxEditorService,\n    private menuService: MenuService\n  ) {  }\n\n  @HostBinding('class.NgxEditor__MenuItem--Active') get valid(): boolean {\n    return this.isActive || this.showPopup;\n  }\n\n  @HostBinding('class.NgxEditor--Disabled') get disabled(): boolean {\n    return !this.canExecute;\n  }\n\n  get icon(): string {\n    return Icon.get(this.isActive ? 'unlink' : 'link');\n  }\n\n  get href(): AbstractControl {\n    return this.form.get('href');\n  }\n\n  get text(): AbstractControl {\n    return this.form.get('text');\n  }\n\n  @HostListener('document:mousedown', ['$event']) onDocumentClick(e: MouseEvent): void {\n    if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n      this.hideForm();\n    }\n  }\n\n  getLabel(key: string): string {\n    return this.ngxeService.locals.get(key);\n  }\n\n  private hideForm(): void {\n    this.showPopup = false;\n    this.form.reset({\n      href: '',\n      text: '',\n      openInNewTab: true\n    });\n    this.text.enable();\n  }\n\n  onMouseDown(e: MouseEvent): void {\n    e.preventDefault();\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    const { state, dispatch } = this.editorView;\n\n    if (this.isActive) {\n      LinkCommand.remove(state, dispatch);\n      return;\n    }\n\n    this.showPopup = !this.showPopup;\n    if (this.showPopup) {\n      this.setText();\n    }\n  }\n\n  private setText = () => {\n    const { state: { selection, doc } } = this.editorView;\n    const { empty, from, to } = selection;\n    const selectedText = !empty ? doc.textBetween(from, to) : '';\n\n    if (selectedText) {\n      this.text.patchValue(selectedText);\n      this.text.disable();\n    }\n  }\n\n  private update = (view: EditorView) => {\n    const { state } = view;\n    this.isActive = LinkCommand.isActive(state, { strict: false });\n    this.canExecute = LinkCommand.canExecute(state);\n  }\n\n  insertLink(e: MouseEvent): void {\n    e.preventDefault();\n    const { text, href, openInNewTab } = this.form.getRawValue();\n    const { dispatch, state } = this.editorView;\n    const { selection } = state;\n\n    const attrs = {\n      title: href,\n      href,\n      target: openInNewTab ? '_blank' : '_self'\n    };\n\n    if (selection.empty) {\n      LinkCommand.insert(text, attrs)(state, dispatch);\n      this.editorView.focus();\n    } else {\n      LinkCommand.update(attrs)(state, dispatch);\n    }\n    this.hideForm();\n  }\n\n  ngOnInit(): void {\n    this.editorView = this.menuService.editor.view;\n\n    this.updateSubscription = this.menuService.editor.update.subscribe((view: EditorView) => {\n      this.update(view);\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.updateSubscription.unsubscribe();\n  }\n}\n","import {\n  Component, ElementRef, HostBinding,\n  HostListener, Input, OnDestroy, OnInit\n} from '@angular/core';\nimport { EditorView } from 'prosemirror-view';\nimport { Subscription } from 'rxjs';\n\nimport { NgxEditorService } from '../../../editor.service';\nimport { MenuService } from '../menu.service';\nimport { ToggleCommands } from '../MenuCommands';\nimport { TBHeadingItems } from '../../../types';\n\n@Component({\n  selector: 'ngx-dropdown',\n  templateUrl: './dropdown.component.html',\n  styleUrls: ['./dropdown.component.scss']\n})\nexport class DropdownComponent implements OnInit, OnDestroy {\n  private editorView: EditorView;\n  private updateSubscription: Subscription;\n\n  @Input() group: string;\n  @Input() items: TBHeadingItems[];\n\n  isDropdownOpen = false;\n\n  private activeItems: TBHeadingItems[] = [];\n  disabledItems: string[] = [];\n  activeItem: string | null;\n\n  constructor(\n    private ngxeService: NgxEditorService,\n    private menuService: MenuService,\n    private el: ElementRef\n  ) { }\n\n  @HostBinding('class.NgxEditor__Dropdown--Selected') get isSelected(): boolean {\n    return Boolean(this.activeItem || this.isDropdownOpen);\n  }\n\n  @HostBinding('class.NgxEditor--Disabled') get isDropdownDisabled(): boolean {\n    return this.disabledItems.length === this.items.length;\n  }\n\n  @HostListener('document:mousedown', ['$event.target']) onDocumentClick(target: Node): void {\n    if (!this.el.nativeElement.contains(target) && this.isDropdownOpen) {\n      this.isDropdownOpen = false;\n    }\n  }\n\n  getName(key: string): string {\n    return this.ngxeService.locals.get(key);\n  }\n\n  toggleDropdown(e: MouseEvent): void {\n    e.preventDefault();\n    this.isDropdownOpen = !this.isDropdownOpen;\n  }\n\n  onClick(e: MouseEvent, item: TBHeadingItems): void {\n    e.preventDefault();\n\n    // consider only left click\n    if (e.button !== 0) {\n      return;\n    }\n\n    const command = ToggleCommands[item];\n    const { state, dispatch } = this.editorView;\n    command.toggle()(state, dispatch);\n    this.isDropdownOpen = false;\n  }\n\n  private update = (view: EditorView) => {\n    const { state } = view;\n    this.activeItems = [];\n    this.disabledItems = [];\n\n    this.items.forEach((item: TBHeadingItems) => {\n      const command = ToggleCommands[item];\n      const isActive = command.isActive(state);\n\n      if (isActive) {\n        this.activeItems.push(item);\n      }\n\n      if (!command.canExecute(state)) {\n        this.disabledItems.push(item);\n      }\n    });\n\n    if (this.activeItems.length === 1) {\n      this.activeItem = this.activeItems[0];\n    } else {\n      this.activeItem = null;\n    }\n  }\n\n  ngOnInit(): void {\n    this.editorView = this.menuService.editor.view;\n\n    this.updateSubscription = this.menuService.editor.update.subscribe((view: EditorView) => {\n      this.update(view);\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.updateSubscription.unsubscribe();\n  }\n}\n","import {\n  Component, ElementRef, HostBinding,\n  HostListener, OnDestroy, OnInit\n} from '@angular/core';\nimport { AbstractControl, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { NodeSelection } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { Subscription } from 'rxjs';\n\nimport { NgxEditorService } from '../../../editor.service';\nimport { MenuService } from '../menu.service';\nimport Icon from '../../../icons';\nimport { Image as ImageCommand } from '../MenuCommands';\n\n@Component({\n  selector: 'ngx-image',\n  templateUrl: './image.component.html',\n  styleUrls: ['./image.component.scss']\n})\nexport class ImageComponent implements OnInit, OnDestroy {\n  showPopup = false;\n  isActive = false;\n  private updateSubscription: Subscription;\n\n  form = new FormGroup({\n    src: new FormControl('', [\n      Validators.required,\n      Validators.pattern('(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/?')\n    ]),\n    alt: new FormControl(''),\n    title: new FormControl('')\n  });\n\n  private editorView: EditorView;\n\n  constructor(\n    private el: ElementRef,\n    private ngxeService: NgxEditorService,\n    private menuService: MenuService\n  ) {\n\n  }\n\n  @HostBinding('class.NgxEditor__MenuItem--Active') get valid(): boolean {\n    return this.isActive || this.showPopup;\n  }\n\n  get icon(): string {\n    return Icon.get('image');\n  }\n\n  get src(): AbstractControl {\n    return this.form.get('src');\n  }\n\n  @HostListener('document:mousedown', ['$event']) onDocumentClick(e: MouseEvent): void {\n    if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n      this.hideForm();\n    }\n  }\n\n  getLabel(key: string): string {\n    return this.ngxeService.locals.get(key);\n  }\n\n  private hideForm(): void {\n    this.showPopup = false;\n    this.form.reset({\n      src: '',\n      alt: '',\n      title: ''\n    });\n  }\n\n  onMouseDown(e: MouseEvent): void {\n    e.preventDefault();\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    this.showPopup = !this.showPopup;\n\n    if (this.showPopup) {\n      this.fillForm();\n    }\n  }\n\n  private fillForm(): void {\n    const { state } = this.editorView;\n    const { selection } = state;\n    if (selection instanceof NodeSelection && this.isActive) {\n      const { src, alt = '', title = '' } = selection.node.attrs;\n\n      this.form.setValue({\n        src,\n        alt,\n        title\n      });\n    }\n  }\n\n  private update = (view: EditorView) => {\n    const { state } = view;\n    this.isActive = ImageCommand.isActive(state);\n  }\n\n  insertLink(e: MouseEvent): void {\n    e.preventDefault();\n    const { src, alt, title } = this.form.getRawValue();\n    const { dispatch, state } = this.editorView;\n\n    const attrs = {\n      alt,\n      title\n    };\n\n    ImageCommand.insert(src, attrs)(state, dispatch);\n    this.editorView.focus();\n    this.hideForm();\n  }\n\n  ngOnInit(): void {\n    this.editorView = this.menuService.editor.view;\n\n    this.updateSubscription = this.menuService.editor.update.subscribe((view: EditorView) => {\n      this.update(view);\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.updateSubscription.unsubscribe();\n  }\n}\n","import {\n  Component, ElementRef, HostBinding,\n  HostListener, OnDestroy, Input, OnInit\n} from '@angular/core';\nimport { EditorView } from 'prosemirror-view';\nimport { Subscription } from 'rxjs';\n\nimport Icon from '../../../icons';\nimport { NgxEditorService } from '../../../editor.service';\nimport { MenuService } from '../menu.service';\nimport { TextColor, TextBackgroundColor } from '../MenuCommands';\n\ntype Command = typeof TextColor | typeof TextBackgroundColor;\n\n@Component({\n  selector: 'ngx-color-picker',\n  templateUrl: './color-picker.component.html',\n  styleUrls: ['./color-picker.component.scss']\n})\nexport class ColorPickerComponent implements OnInit, OnDestroy {\n  @Input() presets: string[][];\n  @Input() type: string;\n\n  constructor(\n    private el: ElementRef,\n    private menuService: MenuService,\n    private ngxeService: NgxEditorService\n  ) { }\n\n  @HostBinding('class.NgxEditor__MenuItem--Active') get valid(): boolean {\n    return this.isActive || this.showPopup;\n  }\n\n  @HostBinding('class.NgxEditor--Disabled') get disabled(): boolean {\n    return !this.canExecute;\n  }\n\n  get title(): string {\n    return this.getLabel(this.type === 'text_color' ? 'text_color' : 'background_color');\n  }\n\n  get icon(): string {\n    return Icon.get(this.type === 'text_color' ? 'text_color' : 'color_fill');\n  }\n\n  private get command(): Command {\n    return this.type === 'text_color' ? TextColor : TextBackgroundColor;\n  }\n\n  private updateSubscription: Subscription;\n  private editorView: EditorView;\n  showPopup = false;\n  isActive = false;\n  activeColors: string[] = [];\n  private canExecute = true;\n\n  getContrastYIQ(hexcolor: string): string {\n    hexcolor = hexcolor.replace('#', '');\n    const r = parseInt(hexcolor.substr(0, 2), 16);\n    const g = parseInt(hexcolor.substr(2, 2), 16);\n    const b = parseInt(hexcolor.substr(4, 2), 16);\n    const yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;\n    return (yiq >= 128) ? 'black' : 'white';\n  }\n\n  @HostListener('document:mousedown', ['$event']) onDocumentClick(e: MouseEvent): void {\n    if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n      this.hidePopup();\n    }\n  }\n\n  private hidePopup(): void {\n    this.showPopup = false;\n  }\n\n  togglePopup(e: MouseEvent): void {\n    e.preventDefault();\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    this.showPopup = !this.showPopup;\n  }\n\n  remove(e: MouseEvent): void {\n    e.preventDefault();\n    const { state, dispatch } = this.editorView;\n\n    this.command.remove()(state, dispatch);\n    this.hidePopup();\n  }\n\n  onColorSelect(e: MouseEvent, color: string): void {\n    e.preventDefault();\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    const { state, dispatch } = this.editorView;\n\n    if (this.type === 'text_color') {\n      const attrs = { color };\n      this.command.apply(attrs)(state, dispatch);\n    } else {\n      const attrs = { backgroundColor: color };\n      this.command.apply(attrs)(state, dispatch);\n    }\n\n    if (!this.editorView.hasFocus()) {\n      this.editorView.focus();\n    }\n\n    this.hidePopup();\n  }\n\n  private update = (view: EditorView) => {\n    const { state } = view;\n    this.canExecute = this.command.canExecute(state);\n    this.isActive = this.command.isActive(state);\n    this.activeColors = [];\n\n    if (this.isActive) {\n      this.activeColors = this.command.getActiveColors(state);\n    }\n  }\n\n  getLabel(key: string): string {\n    return this.ngxeService.locals.get(key);\n  }\n\n  ngOnInit(): void {\n    this.editorView = this.menuService.editor.view;\n\n    this.updateSubscription = this.menuService.editor.update.subscribe((view: EditorView) => {\n      this.update(view);\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.updateSubscription.unsubscribe();\n  }\n}\n","import {\n  Component, Input, OnDestroy,\n  OnInit\n} from '@angular/core';\nimport { SafeHtml } from '@angular/platform-browser';\nimport { EditorView } from 'prosemirror-view';\nimport { Subscription } from 'rxjs';\n\nimport Editor from '../../../Editor';\nimport Icon from '../../../icons';\nimport { TBItems } from '../../../types';\nimport { SanitizeHtmlPipe } from '../../../pipes/sanitize/sanitize-html.pipe';\nimport { ToggleCommands } from '../MenuCommands';\nimport { NgxEditorService } from '../../../editor.service';\n\n@Component({\n  selector: 'ngx-bubble',\n  templateUrl: './bubble.component.html',\n  styleUrls: ['./bubble.component.scss']\n})\nexport class BubbleComponent implements OnInit, OnDestroy {\n  constructor(private sanitizeHTML: SanitizeHtmlPipe, private ngxeService: NgxEditorService) { }\n\n  private get view(): EditorView {\n    return this.editor.view;\n  }\n\n  @Input() editor: Editor;\n\n  private updateSubscription: Subscription;\n  execulableItems: TBItems[] = [];\n  activeItems: TBItems[] = [];\n\n  toolbar: TBItems[][] = [\n    ['bold', 'italic', 'underline', 'strike'],\n    ['ordered_list', 'bullet_list', 'blockquote', 'code'],\n    ['align_left', 'align_center', 'align_right', 'align_justify']\n  ];\n\n  toggleCommands: TBItems[] = [\n    'bold', 'italic', 'underline', 'strike',\n    'ordered_list', 'bullet_list', 'blockquote', 'code',\n    'align_left', 'align_center', 'align_right', 'align_justify'\n  ];\n\n  getIcon(name: TBItems): SafeHtml {\n    const icon = Icon.getPath(name);\n    return this.sanitizeHTML.transform(icon);\n  }\n\n  getTitle(name: string): string {\n    return this.ngxeService.locals.get(name);\n  }\n\n  onClick(e: MouseEvent, commandName: TBItems): void {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    const { state, dispatch } = this.view;\n\n    const command = ToggleCommands[commandName];\n    command.toggle()(state, dispatch);\n  }\n\n  private update(view: EditorView): void {\n    this.activeItems = [];\n    this.execulableItems = [];\n    const { state } = view;\n\n    this.toggleCommands.forEach(toolbarItem => {\n      const command = ToggleCommands[toolbarItem];\n\n      const isActive = command.isActive(state);\n      if (isActive) {\n        this.activeItems.push(toolbarItem);\n      }\n\n      const canExecute = command.canExecute(state);\n\n      if (canExecute) {\n        this.execulableItems.push(toolbarItem);\n      }\n    });\n  }\n\n  ngOnInit(): void {\n    this.updateSubscription = this.editor.update\n      .subscribe((view) => {\n        this.update(view);\n      });\n  }\n\n  ngOnDestroy(): void {\n    this.updateSubscription.unsubscribe();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { MenuComponent } from './menu.component';\nimport { ToggleCommandComponent } from './toggle-command/toggle-command.component';\nimport { LinkComponent } from './link/link.component';\nimport { DropdownComponent } from './dropdown/dropdown.component';\nimport { ImageComponent } from './image/image.component';\nimport { ColorPickerComponent } from './color-picker/color-picker.component';\nimport { FloatingMenuComponent } from './floating-menu/floating-menu.component';\nimport { BubbleComponent } from './bubble/bubble.component';\n\nimport { SanitizeHtmlPipe } from '../../pipes/sanitize/sanitize-html.pipe';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule\n  ],\n  declarations: [\n    // pipes\n    SanitizeHtmlPipe,\n\n    // components\n    MenuComponent,\n    ToggleCommandComponent,\n    LinkComponent,\n    DropdownComponent,\n    ImageComponent,\n    ColorPickerComponent,\n\n    FloatingMenuComponent,\n    BubbleComponent\n  ],\n  providers: [\n    SanitizeHtmlPipe,\n  ],\n  exports: [\n    MenuComponent,\n    FloatingMenuComponent\n  ],\n})\n\nexport class MenuModule { }\n","import { NgModule, ModuleWithProviders, InjectionToken } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NgxEditorConfig } from './types';\n\nimport { NgxEditorComponent } from './editor.component';\nimport { NgxEditorService, NgxEditorServiceConfig, provideMyServiceOptions } from './editor.service';\nimport { MenuModule } from './modules/menu/menu.module';\n\nimport { MenuComponent } from './modules/menu/menu.component';\nimport { ImageViewComponent } from './components/image-view/image-view.component';\nimport { FloatingMenuComponent } from './modules/menu/floating-menu/floating-menu.component';\n\nconst NGX_EDITOR_CONFIG_TOKEN = new InjectionToken<NgxEditorConfig>('NgxEditorConfig');\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MenuModule,\n  ],\n  providers: [],\n  declarations: [\n    NgxEditorComponent,\n    ImageViewComponent\n  ],\n  exports: [\n    NgxEditorComponent,\n    MenuComponent,\n    FloatingMenuComponent\n  ]\n})\n\nexport class NgxEditorModule {\n  static forRoot(config: NgxEditorConfig): ModuleWithProviders<NgxEditorModule> {\n\n    return {\n      ngModule: NgxEditorModule,\n      providers: [\n        {\n          provide: NGX_EDITOR_CONFIG_TOKEN,\n          useValue: config\n        },\n        {\n          provide: NgxEditorServiceConfig,\n          useFactory: provideMyServiceOptions,\n          deps: [NGX_EDITOR_CONFIG_TOKEN]\n        }\n      ]\n    };\n  }\n\n  static forChild(config: NgxEditorConfig): ModuleWithProviders<NgxEditorModule> {\n    return {\n      ngModule: NgxEditorModule,\n      providers: [\n        {\n          provide: NGX_EDITOR_CONFIG_TOKEN,\n          useValue: config\n        },\n        {\n          provide: NgxEditorServiceConfig,\n          useFactory: provideMyServiceOptions,\n          deps: [NGX_EDITOR_CONFIG_TOKEN]\n        },\n        NgxEditorService,\n      ]\n    };\n  }\n}\n","import { AbstractControl, ValidatorFn } from '@angular/forms';\nimport { Schema, Node as ProseMirrorNode } from 'prosemirror-model';\n\nimport { parseContent } from './parsers';\nimport defaultSchema from './schema';\n\ntype ValidationErrors = Record<string, any>;\n\nconst isEmptyInputValue = (value: any): boolean => {\n  // we don't check for string here so it also works with arrays\n  return value === null || value.length === 0;\n};\n\nconst hasValidLength = (value: any): boolean => {\n  // non-strict comparison is intentional, to check for both `null` and `undefined` values\n  return value != null && typeof value.length === 'number';\n};\n\nconst isDocEmpty = (doc: ProseMirrorNode | null): boolean => {\n  if (!doc) {\n    return true;\n  }\n\n  const { childCount, firstChild } = doc;\n  return Boolean(childCount === 1 && firstChild?.isTextblock && firstChild.content.size === 0);\n};\n\n// @dynamic\nexport class Validators {\n\n  static required(userSchema?: Schema): ValidatorFn {\n    return (control: AbstractControl): ValidationErrors | null => {\n\n      const schema = userSchema || defaultSchema;\n      const doc = parseContent(control.value, schema);\n\n      const isEmpty = isDocEmpty(doc);\n\n      if (!isEmpty) {\n        return null;\n      }\n\n      return {\n        required: true\n      };\n    };\n  }\n\n  static maxLength(maxLength: number, userSchema?: Schema): ValidatorFn {\n    return (control: AbstractControl): ValidationErrors | null => {\n      const schema = userSchema || defaultSchema;\n      const doc = parseContent(control.value, schema);\n\n      const value = doc.textContent;\n\n      if (hasValidLength(value) && value.length > maxLength) {\n        return {\n          maxlength: {\n            requiredLength: maxLength,\n            actualLength: value.length\n          }\n        };\n      }\n\n      return null;\n    };\n  }\n\n  static minLength(minLength: number, userSchema?: Schema): ValidatorFn {\n    return (control: AbstractControl): ValidationErrors | null => {\n\n      const schema = userSchema || defaultSchema;\n      const doc = parseContent(control.value, schema);\n\n      const value = doc.textContent;\n\n      if (isEmptyInputValue(value) || !hasValidLength(value)) {\n        // don't validate empty values to allow optional controls\n        // don't validate values without `length` property\n        return null;\n      }\n\n      if (value.length < minLength) {\n        return {\n          minlength: {\n            requiredLength: minLength, actualLength: value.length\n          }\n        };\n      }\n\n      return null;\n    };\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { EditorState, Transaction } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport {\n  chainCommands, createParagraphNear, liftEmptyBlock,\n  newlineInCode, splitBlock\n} from 'prosemirror-commands';\nimport { DOMParser } from 'prosemirror-model';\n\nimport MarkCommand from './commands/Mark';\nimport ListCommand from './commands/ListItem';\nimport LinkCommand, { LinkAttrs } from './commands/Link';\nimport HeadingCommand, { HeadingLevels } from './commands/Heading';\nimport ImageCommand, { ImageAttrs } from './commands/Image';\nimport TextColorCommand from './commands/TextColor';\nimport TextAlignCommand, { Align } from './commands/TextAlign';\n\nconst execMark = (name: string, toggle = false) => {\n  return (state: EditorState, dispatch: (tr: Transaction) => void) => {\n    const command = new MarkCommand(name);\n\n    if (!toggle) {\n      return command.apply()(state, dispatch);\n    }\n\n    return command.toggle()(state, dispatch);\n  };\n};\n\nclass EditorCommands {\n  private view: EditorView;\n  private state: EditorState;\n  private tr: Transaction;\n\n  constructor(view: EditorView) {\n    if (!view) {\n      throw Error('NgxEditor: Required view to initialize commands.');\n    }\n\n    this.view = view;\n    this.state = view.state;\n    this.tr = this.view.state.tr;\n  }\n\n  private applyTrx = (tr?: Transaction) => {\n    this.state = this.state.apply(tr ?? this.tr);\n    this.tr = this.state.tr;\n    this.tr.setMeta('APPLIED_TRX', true);\n  }\n\n  private dispatch = (tr: Transaction): void => {\n    this.applyTrx(tr);\n  }\n\n  exec(): boolean {\n    // No changes applied\n    if (!this.tr.getMeta('APPLIED_TRX')) {\n      return false;\n    }\n\n    const forceEmit = !this.view.state.doc.eq(this.state.doc);\n    this.view.updateState(this.state);\n\n    const tr = this.tr\n      .setMeta('FORCE_EMIT', forceEmit);\n\n    this.view.dispatch(tr);\n    return true;\n  }\n\n  focus(): this {\n    this.view.focus();\n    return this;\n  }\n\n  scrollIntoView(): this {\n    this.tr.scrollIntoView();\n    this.applyTrx();\n    return this;\n  }\n\n  insertText(text: string): this {\n    this.tr.insertText(text);\n    this.applyTrx();\n    return this;\n  }\n\n  insertNewLine(): this {\n    const newLineCommands = [newlineInCode, createParagraphNear, liftEmptyBlock, splitBlock];\n    chainCommands(...newLineCommands)(this.state, this.dispatch);\n    return this;\n  }\n\n  applyMark(name: string): this {\n    execMark(name, false)(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleMark(name: string): this {\n    execMark(name, true)(this.state, this.dispatch);\n    return this;\n  }\n\n  bold(): this {\n    execMark('strong')(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleBold(): this {\n    execMark('strong', true)(this.state, this.dispatch);\n    return this;\n  }\n\n  italics(): this {\n    execMark('em')(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleItalics(): this {\n    execMark('em', true)(this.state, this.dispatch);\n    return this;\n  }\n\n  underline(): this {\n    execMark('u')(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleUnderline(): this {\n    execMark('u', true)(this.state, this.dispatch);\n    return this;\n  }\n\n  strike(): this {\n    execMark('s')(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleStrike(): this {\n    execMark('s', true)(this.state, this.dispatch);\n    return this;\n  }\n\n  code(): this {\n    execMark('code')(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleCode(): this {\n    execMark('code', true)(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleOrderedList(): this {\n    const command = new ListCommand(false);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleBulletList(): this {\n    const command = new ListCommand(true);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleHeading(level: HeadingLevels): this {\n    const command = new HeadingCommand(level);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n\n  insertLink(text: string, attrs: LinkAttrs): this {\n    const command = new LinkCommand();\n    command.insert(text, attrs)(this.state, this.dispatch);\n    return this;\n  }\n\n  updateLink(attrs: LinkAttrs): this {\n    const command = new LinkCommand();\n    command.update(attrs)(this.state, this.dispatch);\n    return this;\n  }\n\n  insertImage(src: string, attrs: ImageAttrs = {}): this {\n    const command = new ImageCommand();\n    command.insert(src, attrs)(this.state, this.dispatch);\n    return this;\n  }\n\n  textColor(color: string): this {\n    const command = new TextColorCommand('text_color');\n    command.apply({ color })(this.state, this.dispatch);\n    return this;\n  }\n\n  backgroundColor(color: string): this {\n    const command = new TextColorCommand('text_background_color');\n    command.apply({ backgroundColor: color })(this.state, this.dispatch);\n    return this;\n  }\n\n  removeTextColor(): this {\n    const command = new TextColorCommand('text_color');\n    command.remove()(this.state, this.dispatch);\n    return this;\n  }\n\n  removeBackgroundColor(): this {\n    const command = new TextColorCommand('text_background_color');\n    command.remove()(this.state, this.dispatch);\n    return this;\n  }\n\n  align(p: Align): this {\n    const command = new TextAlignCommand(p);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n\n  insertHTML(html: string): this {\n    const { selection, schema, tr } = this.state;\n    const { from, to } = selection;\n\n    const element = document.createElement('div');\n    element.innerHTML = html.trim();\n    const slice = DOMParser.fromSchema(schema).parseSlice(element);\n\n    const transaction = tr.replaceRange(from, to, slice);\n    this.applyTrx(transaction);\n\n    return this;\n  }\n}\n\nexport default EditorCommands;\n","import { NodeType, Schema } from 'prosemirror-model';\nimport { Plugin } from 'prosemirror-state';\nimport { keymap } from 'prosemirror-keymap';\nimport { toggleMark, baseKeymap, chainCommands, exitCode } from 'prosemirror-commands';\nimport { splitListItem, liftListItem, sinkListItem } from 'prosemirror-schema-list';\nimport { history, undo, redo } from 'prosemirror-history';\nimport {\n  inputRules, wrappingInputRule, textblockTypeInputRule,\n  smartQuotes, emDash, ellipsis, InputRule\n} from 'prosemirror-inputrules';\n\ninterface Options {\n  history: boolean;\n  keyboardShortcuts: boolean;\n  inputRules: boolean;\n}\n\ninterface ShortcutOptions {\n  history: boolean;\n}\n\nconst isMacOs = /Mac/.test(navigator.platform);\n\n// Input rules ref: https://github.com/ProseMirror/prosemirror-example-setup/\n\n// : (NodeType) → InputRule\n// Given a blockquote node type, returns an input rule that turns `\"> \"`\n// at the start of a textblock into a blockquote.\nconst blockQuoteRule = (nodeType: NodeType): InputRule => {\n  return wrappingInputRule(/^\\s*>\\s$/, nodeType);\n};\n\n// : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a number\n// followed by a dot at the start of a textblock into an ordered list.\nconst orderedListRule = (nodeType: NodeType): InputRule => {\n  return wrappingInputRule(\n    /^(\\d+)\\.\\s$/,\n    nodeType,\n    match => ({ order: +match[1] }),\n    (match, node) => node.childCount + node.attrs.order === +match[1]\n  );\n};\n\n// : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a bullet\n// (dash, plush, or asterisk) at the start of a textblock into a\n// bullet list.\nconst bulletListRule = (nodeType: NodeType): InputRule => {\n  return wrappingInputRule(/^\\s*([-+*])\\s$/, nodeType);\n};\n\n// : (NodeType) → InputRule\n// Given a code block node type, returns an input rule that turns a\n// textblock starting with three backticks into a code block.\nconst codeBlockRule = (nodeType: NodeType): InputRule => {\n  return textblockTypeInputRule(/^```$/, nodeType);\n};\n\n// : (NodeType, number) → InputRule\n// Given a node type and a maximum level, creates an input rule that\n// turns up to that number of `#` characters followed by a space at\n// the start of a textblock into a heading whose level corresponds to\n// the number of `#` signs.\nconst headingRule = (nodeType: NodeType, maxLevel: number): InputRule => {\n  return textblockTypeInputRule(\n    new RegExp('^(#{1,' + maxLevel + '})\\\\s$'),\n    nodeType,\n    (match) => ({ level: match[1].length })\n  );\n};\n\n// : (Schema) → Plugin\n// A set of input rules for creating the basic block quotes, lists,\n// code blocks, and heading.\nconst buildInputRules = (schema: Schema): Plugin => {\n  const rules = smartQuotes.concat(ellipsis, emDash);\n\n  rules.push(blockQuoteRule(schema.nodes.blockquote));\n  rules.push(orderedListRule(schema.nodes.ordered_list));\n  rules.push(bulletListRule(schema.nodes.bullet_list));\n  rules.push(codeBlockRule(schema.nodes.code_block));\n  rules.push(headingRule(schema.nodes.heading, 6));\n\n  return inputRules({ rules });\n};\n\nconst getKeyboardShortcuts = (schema: Schema, options: ShortcutOptions) => {\n  const historyKeyMap: Record<string, any> = {};\n\n  historyKeyMap['Mod-z'] = undo;\n  if (isMacOs) {\n    historyKeyMap['Shift-Mod-z'] = redo;\n  } else {\n    historyKeyMap['Mod-y'] = redo;\n  }\n\n  const plugins = [\n    keymap({\n      'Mod-b': toggleMark(schema.marks.strong),\n      'Mod-i': toggleMark(schema.marks.em),\n      'Mod-`': toggleMark(schema.marks.code),\n    }),\n    keymap({\n      Enter: splitListItem(schema.nodes.list_item),\n      'Shift-Enter': chainCommands(exitCode, (state, dispatch) => {\n        const tr = state.tr;\n        const br = schema.nodes.hard_break;\n        dispatch(tr.replaceSelectionWith(br.create()).scrollIntoView());\n        return true;\n      }),\n      'Mod-[': liftListItem(schema.nodes.list_item),\n      'Mod-]': sinkListItem(schema.nodes.list_item),\n      Tab: sinkListItem(schema.nodes.list_item)\n    }),\n    keymap(baseKeymap)\n  ];\n\n  if (options.history) {\n    plugins.push(keymap(historyKeyMap));\n  }\n\n  return plugins;\n};\n\nconst getDefaultPlugins = (schema: Schema, options: Options): Plugin[] => {\n  const plugins: Plugin[] = [];\n\n  if (options.keyboardShortcuts) {\n    plugins.push(...getKeyboardShortcuts(schema, { history: options.history }));\n  }\n\n  if (options.history) {\n    plugins.push(history());\n  }\n\n  if (options.inputRules) {\n    plugins.push(buildInputRules(schema));\n  }\n\n  return plugins;\n};\n\nexport default getDefaultPlugins;\n","import { Schema } from 'prosemirror-model';\nimport { EditorState, Plugin, Transaction } from 'prosemirror-state';\nimport { EditorProps, EditorView } from 'prosemirror-view';\nimport { Observable, Subject } from 'rxjs';\n\nimport { isNil } from 'ngx-editor/utils';\n\nimport EditorCommands from './EditorCommands';\nimport defautlSchema from './schema';\nimport { parseContent } from './parsers';\nimport getDefaultPlugins from './defaultPlugins';\n\ntype JSONDoc = Record<string, any>;\ntype Content = string | null | JSONDoc;\n\ninterface Options {\n  content?: Content;\n  history?: boolean;\n  keyboardShortcuts?: boolean;\n  inputRules?: boolean;\n  schema?: Schema;\n  plugins?: Plugin[];\n  nodeViews?: EditorProps['nodeViews'];\n}\n\nconst DEFAULT_OPTIONS: Options = {\n  content: null,\n  history: true,\n  keyboardShortcuts: true,\n  inputRules: true,\n  schema: defautlSchema,\n  plugins: [],\n  nodeViews: {}\n};\n\nclass Editor {\n  private options: Options;\n  view: EditorView;\n\n  constructor(options: Options = DEFAULT_OPTIONS) {\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    this.createEditor();\n  }\n\n  private valueChangesSubject = new Subject<JSONDoc>();\n  private updateSubject = new Subject<EditorView>();\n\n  get valueChanges(): Observable<JSONDoc> {\n    return this.valueChangesSubject.asObservable();\n  }\n\n  get update(): Observable<EditorView> {\n    return this.updateSubject.asObservable();\n  }\n\n  get schema(): Schema {\n    return this.options.schema || defautlSchema;\n  }\n\n  get commands(): EditorCommands {\n    return new EditorCommands(this.view);\n  }\n\n  setContent(content: Content): void {\n    if (isNil(content)) {\n      return;\n    }\n\n    const { state } = this.view;\n    const { tr, doc } = state;\n\n    const newDoc = parseContent(content, this.schema);\n\n    tr.replaceWith(0, state.doc.content.size, newDoc);\n\n    // don't emit if both content is same\n    if (doc.eq(tr.doc)) {\n      return;\n    }\n\n    if (!tr.docChanged) {\n      return;\n    }\n\n    this.view.dispatch(tr);\n  }\n\n  private handleTransactions(tr: Transaction): void {\n    const state = this.view.state.apply(tr);\n    this.view.updateState(state);\n\n    this.updateSubject.next(this.view);\n\n    if (!tr.docChanged && !tr.getMeta('FORCE_EMIT')) {\n      return;\n    }\n\n    const json = state.doc.toJSON();\n    this.valueChangesSubject.next(json);\n  }\n\n  private createEditor(): void {\n    const { options } = this;\n    const { content = null, nodeViews } = options;\n    const { history = true, keyboardShortcuts = true, inputRules = true } = options;\n    const schema = this.schema;\n\n    const doc = parseContent(content, schema);\n\n    const plugins: Plugin[] = options.plugins ?? [];\n\n    const defaultPlugins = getDefaultPlugins(schema, {\n      history,\n      keyboardShortcuts,\n      inputRules\n    });\n\n    this.view = new EditorView(null, {\n      state: EditorState.create({\n        doc,\n        schema,\n        plugins: [...defaultPlugins, ...plugins, ],\n      }),\n      nodeViews,\n      dispatchTransaction: this.handleTransactions.bind(this)\n    });\n  }\n\n  registerPlugin(plugin: Plugin): void {\n    const { state } = this.view;\n    const plugins = [...state.plugins, plugin];\n\n    const newState = state.reconfigure({ plugins });\n    this.view.updateState(newState);\n  }\n\n  destroy(): void {\n    this.view.destroy();\n  }\n}\n\nexport default Editor;\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {ImageViewComponent as ɵm} from './lib/components/image-view/image-view.component';\nexport {NgxEditorService as ɵf,NgxEditorServiceConfig as ɵe,provideMyServiceOptions as ɵg} from './lib/editor.service';\nexport {BubbleComponent as ɵl} from './lib/modules/menu/bubble/bubble.component';\nexport {ColorPickerComponent as ɵk} from './lib/modules/menu/color-picker/color-picker.component';\nexport {DropdownComponent as ɵi} from './lib/modules/menu/dropdown/dropdown.component';\nexport {ImageComponent as ɵj} from './lib/modules/menu/image/image.component';\nexport {LinkComponent as ɵh} from './lib/modules/menu/link/link.component';\nexport {MenuModule as ɵc} from './lib/modules/menu/menu.module';\nexport {MenuService as ɵa} from './lib/modules/menu/menu.service';\nexport {ToggleCommandComponent as ɵd} from './lib/modules/menu/toggle-command/toggle-command.component';\nexport {SanitizeHtmlPipe as ɵb} from './lib/pipes/sanitize/sanitize-html.pipe';"],"names":["Plugin","PluginKey","DecorationSet","Decoration","EventEmitter","Component","Input","Output","ViewChild","NodeSelection","ComponentFactoryResolver","ApplicationRef","Fragment","Slice","schema","defaultSchema","DOMSerializer","DOMParser","plugins.editable","plugins.placeholder","plugins.attributes","plugins.focus","plugins.blur","plugins.image","plugins.link","NG_VALUE_ACCESSOR","forwardRef","ViewEncapsulation","Renderer2","Injector","ElementRef","Subject","Injectable","Pipe","DomSanitizer","fromEvent","throttleTime","asyncScheduler","HostBinding","HostListener","Optional","applyMark","toggleMark","isMarkActive","lift","wrapIn","isNodeActive","liftListItem","wrapInList","setBlockType","getSelectionNodes","removeLink","getSelectionMarks","removeMark","Blockquote","Commands.STRONG","Commands.EM","Commands.CODE","Commands.UNDERLINE","Commands.STRIKE","Commands.BLOCKQUOTE","Commands.UL","Commands.OL","Commands.H1","Commands.H2","Commands.H3","Commands.H4","Commands.H5","Commands.H6","Commands.ALIGN_LEFT","Commands.ALIGN_CENTER","Commands.ALIGN_RIGHT","Commands.ALIGN_JUSTIFY","Link","Commands.LINK","Image","Commands.IMAGE","TextColor","Commands.TEXT_COLOR","Commands.TEXT_BACKGROUND_COLOR","FormGroup","FormControl","Validators","LinkCommand","ImageCommand","NgModule","CommonModule","ReactiveFormsModule","InjectionToken","MarkCommand","newlineInCode","createParagraphNear","liftEmptyBlock","splitBlock","chainCommands","ListCommand","HeadingCommand","TextColorCommand","TextAlignCommand","wrappingInputRule","textblockTypeInputRule","smartQuotes","ellipsis","emDash","inputRules","undo","redo","keymap","splitListItem","exitCode","sinkListItem","baseKeymap","history","defautlSchema","isNil","EditorView","EditorState"],"mappings":"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"}